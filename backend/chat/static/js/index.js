!function(){var e=function(e){var t;return function(n){return t||e(t={exports:{},parent:n},t.exports),t.exports}}(function(e,i){const s=t.assets.BLANK_PIXEL,a=t.content.modal.prompt.channel,r={"/":["chat","emojiPicker","promptModal","search","channelList","usersList","listsSidebar","profileSidebar","loader","navbar","alert"],"/login":["loginModal","statusSelect"]};e.exports=class{constructor(){this.components={},this.socketService=new $e(io(location.protocol+"//"+document.domain+":"+location.port,{transports:["websocket"]}),this),this.connected=!1,this.init()}init(){r[window.location.pathname].forEach(e=>{this.components[e]=We[e](),this.components[e].controller=this,this.components[e].setup()}),"/"===window.location.pathname&&(this.socketService.socket,this.saveAvatars())}onConnected(){this.connected=!0,this.components.alert&&this.components.alert.hideAlert()}onDisconnected(){this.connected=!1,this.components.alert&&this.components.alert.showAlert()}onLoginSuccess(){this.socketService.socket.connect(),window.location.href="/"}onChannelsUpdated(e){this.components.channelList.update(e),this.components.search.filterItems(this.components.search.el.value)}onUsersUpdated(e){this.components.usersList.update(e),this.saveAvatars()}onChatLoaded(e,t){let i=n.replaceISODates(t);this.components.chat.loadChat(e,i),this.components.chat.viewChat(e)}onProfileLoaded(e){this.components.profileSidebar.setContent(e)}onStatusChange(e,t){let n=this.components.usersList.findItem(e);n&&(n.dataset.status=t),this.components.chat.getChatName()=="user:"+e&&this.components.chat.setChatStatus(t)}onMessageReceived(e,t){this.components.chat.addMessage(e,t.message,n.convertDate(t.timestamp),t.sender),e.startsWith("user:")?this.components.usersList.incrementUpdates(t.sender):this.components.channelList.incrementUpdates(e),this.components.listsSidebar.displayUpdates(),e===this.components.chat.isActive.dataset.chat&&setTimeout(()=>{this.components.usersList.resetUpdates(e.substring(5)),this.components.channelList.resetUpdates(e)},2e3)}onAppLoaded(){[...this.components.chat.chatBody.children].forEach(e=>e.innerHTML=n.replaceISODates(e.innerHTML)),this.components.loader.close()}getUserData(){return{username:localStorage.getItem("user_name"),user_avatar:localStorage.getItem("user_avatar")?localStorage.getItem("user_avatar"):s,user_location:localStorage.getItem("user_location")||"Unknown",user_status:localStorage.getItem("user_status")}}updateUserData(e,t){localStorage.setItem(e,t),this.socketService.updateUserData("user_"+e,t),"user_avatar"===e&&(this.components.chat.setUserAvatar(),this.components.navbar.setUserAvatar()),"status"===e&&("offline"===t?this.socketService.socket.disconnect():this.socketService.socket.connect())}saveAvatars(){let e=this.components.usersList.el.getElementsByTagName("li"),t={};[...e].map(e=>{t[e.dataset.user]=e.querySelector("img").src}),this.avatars=t}closeAllSidebars(){this.components.profileSidebar.close(),this.components.listsSidebar.close()}sendMessage(e,t){if(this.connected){let i=new Date(Date.now()).toISOString();this.socketService.sendMessage(e,t,i),this.components.chat.addMessage(e,t,n.convertDate(i))}}createItem(e){return"channel"==e?this.createChannel():""}async createChannel(){if(this.connected){let e=a;this.components.promptModal.prompt(e).then(e=>this.socketService.createChannel(e.channel_name)).then(e=>{if(!e.success)return this.components.promptModal.displayError(e.errorMessage),this.components.promptModal.removeAllCustomListeners(),this.createChannel();this.components.promptModal.close()}).catch(e=>console.log("Error creating channel: ",e))}}resolveListItemClick(e){if(e.matches(".list__link[data-chat]")){let t=e.dataset.chat,n=e.parentNode.dataset.status;this.viewChat(t,n)}else if(e.classList.contains("channel__btn-join")){let t=e.closest(".list__link").dataset.chat;this.joinChannel(t)}}joinChannel(e){this.connected&&this.socketService.joinChannel(e)}viewChat(e,t){this.components.chat.loaded.has(e)?(this.socketService.updateCurrentChat(e),this.components.chat.viewChat(e)):this.loadChat(e),e.startsWith("user:")?(this.components.usersList.setActiveItem(e.substring(5)),this.components.channelList.resetActiveItem(),this.components.usersList.resetUpdates(e.substring(5))):(this.components.channelList.setActiveItem(e),this.components.usersList.resetActiveItem(),this.components.channelList.resetUpdates(e)),this.components.listsSidebar.resetUpdates(),t?this.components.chat.setChatStatus(t):this.components.chat.setChatStatus(""),this.closeAllSidebars()}loadChat(e){this.connected&&this.socketService.loadChat(e)}viewProfile(e,t=!1){t&&(e=this.getUserData().username),this.connected&&this.socketService.getProfile(e,t)}}}),t={options:{dateformat:{weekday:"short",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"}},variables:{socketio:{APP:{LOADED:"app_loaded"},CHANNELS:{UPDATE:{ANNOUNCE:"channels_announce_update",REQUEST:"channels_request_update",HTML:"channels_html"},JOIN:"channel_join",CREATE:{NEW:"channel_create",SUCCESS:"channel_create_success",ERROR:"channel_create_error"}},USERS:{UPDATE:{ANNOUNCE:"users_announce_update",REQUEST:"users_request_update",HTML:"users_html"}},CURRENT_CHAT:{UPDATED:"current_chat_updated"},CHAT:{HTML:"chat_html",LOAD:"chat_load"},PROFILE:{HTML:"profile_html",LOAD:"profile_load"},MESSAGE:{SEND:"message_send",RECEIVED:"message_received"},USERDATA:{UPDATE:"userdata_update",STATUS:{UPDATED:"status_updated"}}},template:{USERS:{SELF:{NAME:"username",CURRENT_CHAT:"current_chat",CURRENT_CHAT_DATA:"current_chat_data"},ALL:{DATA:"all_users_data"},ONE:{DATA:"user_data",CHANNELS:"user_channels"}},CHANNELS:{ALL:"all_channels",SELF:"self_channels",ONE:{MEMBERS:"members"}},MESSAGES:{CHANNEL:"channel_messages"}}},assets:{BLANK_PIXEL:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",SVG:{CHANNEL:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100%25' height='100%25' style='background: %23212734' viewBox='-3 -3 28 20'%3E%3Cpath fill='%23a6a9ae' d='M22 11.5V14h-6v-2.5c0-1.48-.81-2.61-1.97-3.45.35-.03.68-.05.97-.05 2.33 0 7 1.17 7 3.5zm-8 0V14H0v-2.5C0 9.17 4.67 8 7 8s7 1.17 7 3.5zM4 3c0-1.66 1.34-3 3-3s2.99 1.34 2.99 3S8.66 6 7 6C5.34 6 4 4.66 4 3zm8 0c0-1.66 1.34-3 3-3s2.99 1.34 2.99 3S16.66 6 15 6c-1.66 0-3-1.34-3-3z'/%3E%3C/svg%3E"}},content:{modal:{prompt:{channel:{title:"Create channel","input-group":[{label:"Enter new channel name:",name:"channel_name",type:"text"}]}}}}},n={};const i=t.options,s=function(e){var t=i.dateformat;return new Date(e).toLocaleString(void 0,t)};n.getCaretCharacterOffsetWithin=function(e){var t,n=0,i=e.ownerDocument||e.document,s=i.defaultView||i.parentWindow;if(void 0!==s.getSelection){if((t=s.getSelection()).rangeCount>0){var a=s.getSelection().getRangeAt(0),r=a.cloneRange();r.selectNodeContents(e),r.setEnd(a.endContainer,a.endOffset),n=r.toString().length}}else if((t=i.selection)&&"Control"!=t.type){var o=t.createRange(),u=i.body.createTextRange();u.moveToElementText(e),u.setEndPoint("EndToEnd",o),n=u.text.length}return n},n.setSelectionRange=function(e,t,n){if(document.createRange&&window.getSelection){var i=document.createRange();i.selectNodeContents(e);for(var s,a,r=function e(t){var n=[];if(3==t.nodeType)n.push(t);else for(var i=t.childNodes,s=0,a=i.length;s<a;++s)n.push.apply(n,e(i[s]));return n}(e),o=!1,u=0,l=0;a=r[l++];){if(s=u+a.length,!o&&t>=u&&(t<s||t==s&&l<=r.length)&&(i.setStart(a,t-u),o=!0),o&&n<=s){i.setEnd(a,n-u);break}u=s}var c=window.getSelection();c.removeAllRanges(),c.addRange(i)}else if(document.selection&&document.body.createTextRange){var h=document.body.createTextRange();h.moveToElementText(e),h.collapse(!0),h.moveEnd("character",n),h.moveStart("character",t),h.select()}},n.removeTextChildren=function(e){return Array.from(e.childNodes).forEach(e=>{3===e.nodeType&&e.parentNode.removeChild(e)})},n.replaceISODates=function(e){let t=e;return Array.from(e.matchAll(/\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/g),e=>e[0]).forEach(e=>{t=t.replace(e,s(e.trim()))}),t},n.convertDate=s;var a=class{constructor(e){this.el=e}setup(){this.modalAlertEl=this.el.querySelector(".modal__alert"),this.closeBtn=this.el.querySelector(".modal__close"),this.submitBtn=this.el.querySelector(".modal__submit"),this.formel=this.el.querySelector("form"),this.closeBtn&&this.closeBtn.addEventListener("click",()=>{this.close()})}open(){document.body.classList.contains("is-blurred")||document.body.classList.add("is-blurred"),this.el.classList.contains("modal--open")||this.el.classList.add("modal--open")}close(){document.body.classList.contains("is-blurred")&&document.body.classList.remove("is-blurred"),this.el.classList.contains("modal--open")&&this.el.classList.remove("modal--open")}displayError(e){this.modalAlertEl.textContent=e}clearError(){this.modalAlertEl.textContent=""}},r={exports:{}};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return p(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,s=function(){};return{s:s,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return r=e.done,e},e:function(e){o=!0,a=e},f:function(){try{r||null==n.return||n.return()}finally{if(o)throw a}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function g(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),e}var v=function(){function e(){f(this,e)}return g(e,[{key:"on",value:function(e,t){return this._callbacks=this._callbacks||{},this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(t),this}},{key:"emit",value:function(e){this._callbacks=this._callbacks||{};var t=this._callbacks[e];if(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];var a,r=d(t);try{for(r.s();!(a=r.n()).done;)a.value.apply(this,i)}catch(o){r.e(o)}finally{r.f()}}return this}},{key:"off",value:function(e,t){if(!this._callbacks||0===arguments.length)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(1===arguments.length)return delete this._callbacks[e],this;for(var i=0;i<n.length;i++)if(n[i]===t){n.splice(i,1);break}return this}}]),e}(),b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(s,v);var t,n,i=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,i=h(t);if(n){var s=h(this).constructor;e=Reflect.construct(i,arguments,s)}else e=i.apply(this,arguments);return l(this,e)});function s(e,t){var n,a,r;if(f(this,s),(n=i.call(this)).element=e,n.version=s.version,n.defaultOptions.previewTemplate=n.defaultOptions.previewTemplate.replace(/\n*/g,""),n.clickableElements=[],n.listeners=[],n.files=[],"string"==typeof n.element&&(n.element=document.querySelector(n.element)),!n.element||null==n.element.nodeType)throw new Error("Invalid dropzone element.");if(n.element.dropzone)throw new Error("Dropzone already attached.");s.instances.push(c(n)),n.element.dropzone=c(n);var o=null!=(r=s.optionsForElement(n.element))?r:{};if(n.options=s.extend({},n.defaultOptions,o,null!=t?t:{}),n.options.forceFallback||!s.isBrowserSupported())return l(n,n.options.fallback.call(c(n)));if(null==n.options.url&&(n.options.url=n.element.getAttribute("action")),!n.options.url)throw new Error("No URL provided.");if(n.options.acceptedFiles&&n.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if(n.options.uploadMultiple&&n.options.chunking)throw new Error("You cannot set both: uploadMultiple and chunking.");return n.options.acceptedMimeTypes&&(n.options.acceptedFiles=n.options.acceptedMimeTypes,delete n.options.acceptedMimeTypes),null!=n.options.renameFilename&&(n.options.renameFile=function(e){return n.options.renameFilename.call(c(n),e.name,e)}),"string"==typeof n.options.method&&(n.options.method=n.options.method.toUpperCase()),(a=n.getExistingFallback())&&a.parentNode&&a.parentNode.removeChild(a),!1!==n.options.previewsContainer&&(n.options.previewsContainer?n.previewsContainer=s.getElement(n.options.previewsContainer,"previewsContainer"):n.previewsContainer=n.element),n.options.clickable&&(!0===n.options.clickable?n.clickableElements=[n.element]:n.clickableElements=s.getElements(n.options.clickable,"clickable")),n.init(),n}return g(s,null,[{key:"initClass",value:function(){this.prototype.Emitter=v,this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],this.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,timeout:3e4,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2e6,parallelChunkUploads:!1,retryChunks:!1,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init:function(){},params:function(e,t,n){if(n)return{dzuuid:n.file.upload.uuid,dzchunkindex:n.index,dztotalfilesize:n.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:n.file.upload.totalChunkCount,dzchunkbyteoffset:n.index*this.options.chunkSize}},accept:function(e,t){return t()},chunksUploaded:function(e,t){t()},fallback:function(){var e;this.element.className="".concat(this.element.className," dz-browser-not-supported");var t,n=d(this.element.getElementsByTagName("div"));try{for(n.s();!(t=n.n()).done;){var i=t.value;if(/(^| )dz-message($| )/.test(i.className)){e=i,i.className="dz-message";break}}}catch(r){n.e(r)}finally{n.f()}e||(e=s.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(e));var a=e.getElementsByTagName("span")[0];return a&&(null!=a.textContent?a.textContent=this.options.dictFallbackMessage:null!=a.innerText&&(a.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(e,t,n,i){var s={srcX:0,srcY:0,srcWidth:e.width,srcHeight:e.height},a=e.width/e.height;null==t&&null==n?(t=s.srcWidth,n=s.srcHeight):null==t?t=n*a:null==n&&(n=t/a);var r=(t=Math.min(t,s.srcWidth))/(n=Math.min(n,s.srcHeight));if(s.srcWidth>t||s.srcHeight>n)if("crop"===i)a>r?(s.srcHeight=e.height,s.srcWidth=s.srcHeight*r):(s.srcWidth=e.width,s.srcHeight=s.srcWidth/r);else{if("contain"!==i)throw new Error("Unknown resizeMethod '".concat(i,"'"));a>r?n=t/a:t=n*a}return s.srcX=(e.width-s.srcWidth)/2,s.srcY=(e.height-s.srcHeight)/2,s.trgWidth=t,s.trgHeight=n,s},transformFile:function(e,t){return(this.options.resizeWidth||this.options.resizeHeight)&&e.type.match(/image.*/)?this.resizeImage(e,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,t):t(e)},previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      <title>Check</title>\n      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      <title>Error</title>\n      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>',drop:function(e){return this.element.classList.remove("dz-drag-hover")},dragstart:function(e){},dragend:function(e){return this.element.classList.remove("dz-drag-hover")},dragenter:function(e){return this.element.classList.add("dz-drag-hover")},dragover:function(e){return this.element.classList.add("dz-drag-hover")},dragleave:function(e){return this.element.classList.remove("dz-drag-hover")},paste:function(e){},reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(e){var t=this;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){e.previewElement=s.createElement(this.options.previewTemplate.trim()),e.previewTemplate=e.previewElement,this.previewsContainer.appendChild(e.previewElement);var n,i=d(e.previewElement.querySelectorAll("[data-dz-name]"));try{for(i.s();!(n=i.n()).done;){var a=n.value;a.textContent=e.name}}catch(h){i.e(h)}finally{i.f()}var r,o=d(e.previewElement.querySelectorAll("[data-dz-size]"));try{for(o.s();!(r=o.n()).done;)(a=r.value).innerHTML=this.filesize(e.size)}catch(h){o.e(h)}finally{o.f()}this.options.addRemoveLinks&&(e._removeLink=s.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'.concat(this.options.dictRemoveFile,"</a>")),e.previewElement.appendChild(e._removeLink));var u,l=function(n){return n.preventDefault(),n.stopPropagation(),e.status===s.UPLOADING?s.confirm(t.options.dictCancelUploadConfirmation,function(){return t.removeFile(e)}):t.options.dictRemoveFileConfirmation?s.confirm(t.options.dictRemoveFileConfirmation,function(){return t.removeFile(e)}):t.removeFile(e)},c=d(e.previewElement.querySelectorAll("[data-dz-remove]"));try{for(c.s();!(u=c.n()).done;)u.value.addEventListener("click",l)}catch(h){c.e(h)}finally{c.f()}}},removedfile:function(e){return null!=e.previewElement&&null!=e.previewElement.parentNode&&e.previewElement.parentNode.removeChild(e.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(e,t){if(e.previewElement){e.previewElement.classList.remove("dz-file-preview");var n,i=d(e.previewElement.querySelectorAll("[data-dz-thumbnail]"));try{for(i.s();!(n=i.n()).done;){var s=n.value;s.alt=e.name,s.src=t}}catch(a){i.e(a)}finally{i.f()}return setTimeout(function(){return e.previewElement.classList.add("dz-image-preview")},1)}},error:function(e,t){if(e.previewElement){e.previewElement.classList.add("dz-error"),"string"!=typeof t&&t.error&&(t=t.error);var n,i=d(e.previewElement.querySelectorAll("[data-dz-errormessage]"));try{for(i.s();!(n=i.n()).done;)n.value.textContent=t}catch(s){i.e(s)}finally{i.f()}}},errormultiple:function(){},processing:function(e){if(e.previewElement&&(e.previewElement.classList.add("dz-processing"),e._removeLink))return e._removeLink.innerHTML=this.options.dictCancelUpload},processingmultiple:function(){},uploadprogress:function(e,t,n){if(e.previewElement){var i,s=d(e.previewElement.querySelectorAll("[data-dz-uploadprogress]"));try{for(s.s();!(i=s.n()).done;){var a=i.value;"PROGRESS"===a.nodeName?a.value=t:a.style.width="".concat(t,"%")}}catch(r){s.e(r)}finally{s.f()}}},totaluploadprogress:function(){},sending:function(){},sendingmultiple:function(){},success:function(e){if(e.previewElement)return e.previewElement.classList.add("dz-success")},successmultiple:function(){},canceled:function(e){return this.emit("error",e,this.options.dictUploadCanceled)},canceledmultiple:function(){},complete:function(e){if(e._removeLink&&(e._removeLink.innerHTML=this.options.dictRemoveFile),e.previewElement)return e.previewElement.classList.add("dz-complete")},completemultiple:function(){},maxfilesexceeded:function(){},maxfilesreached:function(){},queuecomplete:function(){},addedfiles:function(){}},this.prototype._thumbnailQueue=[],this.prototype._processingThumbnail=!1}},{key:"extend",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var s=0,a=n;s<a.length;s++){var r=a[s];for(var o in r){var u=r[o];e[o]=u}}return e}}]),g(s,[{key:"getAcceptedFiles",value:function(){return this.files.filter(function(e){return e.accepted}).map(function(e){return e})}},{key:"getRejectedFiles",value:function(){return this.files.filter(function(e){return!e.accepted}).map(function(e){return e})}},{key:"getFilesWithStatus",value:function(e){return this.files.filter(function(t){return t.status===e}).map(function(e){return e})}},{key:"getQueuedFiles",value:function(){return this.getFilesWithStatus(s.QUEUED)}},{key:"getUploadingFiles",value:function(){return this.getFilesWithStatus(s.UPLOADING)}},{key:"getAddedFiles",value:function(){return this.getFilesWithStatus(s.ADDED)}},{key:"getActiveFiles",value:function(){return this.files.filter(function(e){return e.status===s.UPLOADING||e.status===s.QUEUED}).map(function(e){return e})}},{key:"init",value:function(){var e=this;"form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(s.createElement('<div class="dz-default dz-message"><button class="dz-button" type="button">'.concat(this.options.dictDefaultMessage,"</button></div>"))),this.clickableElements.length&&function t(){return e.hiddenFileInput&&e.hiddenFileInput.parentNode.removeChild(e.hiddenFileInput),e.hiddenFileInput=document.createElement("input"),e.hiddenFileInput.setAttribute("type","file"),(null===e.options.maxFiles||e.options.maxFiles>1)&&e.hiddenFileInput.setAttribute("multiple","multiple"),e.hiddenFileInput.className="dz-hidden-input",null!==e.options.acceptedFiles&&e.hiddenFileInput.setAttribute("accept",e.options.acceptedFiles),null!==e.options.capture&&e.hiddenFileInput.setAttribute("capture",e.options.capture),e.hiddenFileInput.style.visibility="hidden",e.hiddenFileInput.style.position="absolute",e.hiddenFileInput.style.top="0",e.hiddenFileInput.style.left="0",e.hiddenFileInput.style.height="0",e.hiddenFileInput.style.width="0",s.getElement(e.options.hiddenInputContainer,"hiddenInputContainer").appendChild(e.hiddenFileInput),e.hiddenFileInput.addEventListener("change",function(){var n=e.hiddenFileInput.files;if(n.length){var i,s=d(n);try{for(s.s();!(i=s.n()).done;){var a=i.value;e.addFile(a)}}catch(r){s.e(r)}finally{s.f()}}return e.emit("addedfiles",n),t()})}(),this.URL=null!==window.URL?window.URL:window.webkitURL;var t,n=d(this.events);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.on(i,this.options[i])}}catch(r){n.e(r)}finally{n.f()}this.on("uploadprogress",function(){return e.updateTotalUploadProgress()}),this.on("removedfile",function(){return e.updateTotalUploadProgress()}),this.on("canceled",function(t){return e.emit("complete",t)}),this.on("complete",function(t){if(0===e.getAddedFiles().length&&0===e.getUploadingFiles().length&&0===e.getQueuedFiles().length)return setTimeout(function(){return e.emit("queuecomplete")},0)});var a=function(e){if(function(e){if(e.dataTransfer.types)for(var t=0;t<e.dataTransfer.types.length;t++)if("Files"===e.dataTransfer.types[t])return!0;return!1}(e))return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1};return this.listeners=[{element:this.element,events:{dragstart:function(t){return e.emit("dragstart",t)},dragenter:function(t){return a(t),e.emit("dragenter",t)},dragover:function(t){var n;try{n=t.dataTransfer.effectAllowed}catch(i){}return t.dataTransfer.dropEffect="move"===n||"linkMove"===n?"move":"copy",a(t),e.emit("dragover",t)},dragleave:function(t){return e.emit("dragleave",t)},drop:function(t){return a(t),e.drop(t)},dragend:function(t){return e.emit("dragend",t)}}}],this.clickableElements.forEach(function(t){return e.listeners.push({element:t,events:{click:function(n){return(t!==e.element||n.target===e.element||s.elementInside(n.target,e.element.querySelector(".dz-message")))&&e.hiddenFileInput.click(),!0}}})}),this.enable(),this.options.init.call(this)}},{key:"destroy",value:function(){return this.disable(),this.removeAllFiles(!0),(null!=this.hiddenFileInput?this.hiddenFileInput.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,s.instances.splice(s.instances.indexOf(this),1)}},{key:"updateTotalUploadProgress",value:function(){var e,t=0,n=0;if(this.getActiveFiles().length){var i,s=d(this.getActiveFiles());try{for(s.s();!(i=s.n()).done;){var a=i.value;t+=a.upload.bytesSent,n+=a.upload.total}}catch(r){s.e(r)}finally{s.f()}e=100*t/n}else e=100;return this.emit("totaluploadprogress",e,n,t)}},{key:"_getParamName",value:function(e){return"function"==typeof this.options.paramName?this.options.paramName(e):"".concat(this.options.paramName).concat(this.options.uploadMultiple?"[".concat(e,"]"):"")}},{key:"_renameFile",value:function(e){return"function"!=typeof this.options.renameFile?e.name:this.options.renameFile(e)}},{key:"getFallbackForm",value:function(){var e,t;if(e=this.getExistingFallback())return e;var n='<div class="dz-fallback">';this.options.dictFallbackText&&(n+="<p>".concat(this.options.dictFallbackText,"</p>")),n+='<input type="file" name="'.concat(this._getParamName(0),'" ').concat(this.options.uploadMultiple?'multiple="multiple"':void 0,' /><input type="submit" value="Upload!"></div>');var i=s.createElement(n);return"FORM"!==this.element.tagName?(t=s.createElement('<form action="'.concat(this.options.url,'" enctype="multipart/form-data" method="').concat(this.options.method,'"></form>'))).appendChild(i):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=t?t:i}},{key:"getExistingFallback",value:function(){for(var e=function(e){var t,n=d(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(/(^| )fallback($| )/.test(i.className))return i}}catch(s){n.e(s)}finally{n.f()}},t=0,n=["div","form"];t<n.length;t++){var i,s=n[t];if(i=e(this.element.getElementsByTagName(s)))return i}}},{key:"setupEventListeners",value:function(){return this.listeners.map(function(e){return function(){var t=[];for(var n in e.events){var i=e.events[n];t.push(e.element.addEventListener(n,i,!1))}return t}()})}},{key:"removeEventListeners",value:function(){return this.listeners.map(function(e){return function(){var t=[];for(var n in e.events){var i=e.events[n];t.push(e.element.removeEventListener(n,i,!1))}return t}()})}},{key:"disable",value:function(){var e=this;return this.clickableElements.forEach(function(e){return e.classList.remove("dz-clickable")}),this.removeEventListeners(),this.disabled=!0,this.files.map(function(t){return e.cancelUpload(t)})}},{key:"enable",value:function(){return delete this.disabled,this.clickableElements.forEach(function(e){return e.classList.add("dz-clickable")}),this.setupEventListeners()}},{key:"filesize",value:function(e){var t=0,n="b";if(e>0){for(var i=["tb","gb","mb","kb","b"],s=0;s<i.length;s++){var a=i[s];if(e>=Math.pow(this.options.filesizeBase,4-s)/10){t=e/Math.pow(this.options.filesizeBase,4-s),n=a;break}}t=Math.round(10*t)/10}return"<strong>".concat(t,"</strong> ").concat(this.options.dictFileSizeUnits[n])}},{key:"_updateMaxFilesReachedClass",value:function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")}},{key:"drop",value:function(e){if(e.dataTransfer){this.emit("drop",e);for(var t=[],n=0;n<e.dataTransfer.files.length;n++)t[n]=e.dataTransfer.files[n];if(t.length){var i=e.dataTransfer.items;i&&i.length&&null!=i[0].webkitGetAsEntry?this._addFilesFromItems(i):this.handleFiles(t)}this.emit("addedfiles",t)}}},{key:"paste",value:function(e){if(null!=(null!=(t=null!=e?e.clipboardData:void 0)?function(e){return e.items}(t):void 0)){var t;this.emit("paste",e);var n=e.clipboardData.items;return n.length?this._addFilesFromItems(n):void 0}}},{key:"handleFiles",value:function(e){var t,n=d(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.addFile(i)}}catch(s){n.e(s)}finally{n.f()}}},{key:"_addFilesFromItems",value:function(e){var t=this;return function(){var n,i=[],s=d(e);try{for(s.s();!(n=s.n()).done;){var a,r=n.value;null!=r.webkitGetAsEntry&&(a=r.webkitGetAsEntry())?a.isFile?i.push(t.addFile(r.getAsFile())):a.isDirectory?i.push(t._addFilesFromDirectory(a,a.name)):i.push(void 0):null==r.getAsFile||null!=r.kind&&"file"!==r.kind?i.push(void 0):i.push(t.addFile(r.getAsFile()))}}catch(o){s.e(o)}finally{s.f()}return i}()}},{key:"_addFilesFromDirectory",value:function(e,t){var n=this,i=e.createReader(),s=function(e){return"log",n=function(t){return t.log(e)},null!=(t=console)&&"function"==typeof t.log?n(t):void 0;var t,n};return function e(){return i.readEntries(function(i){if(i.length>0){var s,a=d(i);try{for(a.s();!(s=a.n()).done;){var r=s.value;r.isFile?r.file(function(e){if(!n.options.ignoreHiddenFiles||"."!==e.name.substring(0,1))return e.fullPath="".concat(t,"/").concat(e.name),n.addFile(e)}):r.isDirectory&&n._addFilesFromDirectory(r,"".concat(t,"/").concat(r.name))}}catch(o){a.e(o)}finally{a.f()}e()}return null},s)}()}},{key:"accept",value:function(e,t){this.options.maxFilesize&&e.size>1024*this.options.maxFilesize*1024?t(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(e.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):s.isValidFile(e,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(t(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",e)):this.options.accept.call(this,e,t):t(this.options.dictInvalidFileType)}},{key:"addFile",value:function(e){var t=this;e.upload={uuid:s.uuidv4(),progress:0,total:e.size,bytesSent:0,filename:this._renameFile(e)},this.files.push(e),e.status=s.ADDED,this.emit("addedfile",e),this._enqueueThumbnail(e),this.accept(e,function(n){n?(e.accepted=!1,t._errorProcessing([e],n)):(e.accepted=!0,t.options.autoQueue&&t.enqueueFile(e)),t._updateMaxFilesReachedClass()})}},{key:"enqueueFiles",value:function(e){var t,n=d(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.enqueueFile(i)}}catch(s){n.e(s)}finally{n.f()}return null}},{key:"enqueueFile",value:function(e){var t=this;if(e.status!==s.ADDED||!0!==e.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(e.status=s.QUEUED,this.options.autoProcessQueue)return setTimeout(function(){return t.processQueue()},0)}},{key:"_enqueueThumbnail",value:function(e){var t=this;if(this.options.createImageThumbnails&&e.type.match(/image.*/)&&e.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(e),setTimeout(function(){return t._processThumbnailQueue()},0)}},{key:"_processThumbnailQueue",value:function(){var e=this;if(!this._processingThumbnail&&0!==this._thumbnailQueue.length){this._processingThumbnail=!0;var t=this._thumbnailQueue.shift();return this.createThumbnail(t,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,function(n){return e.emit("thumbnail",t,n),e._processingThumbnail=!1,e._processThumbnailQueue()})}}},{key:"removeFile",value:function(e){if(e.status===s.UPLOADING&&this.cancelUpload(e),this.files=y(this.files,e),this.emit("removedfile",e),0===this.files.length)return this.emit("reset")}},{key:"removeAllFiles",value:function(e){null==e&&(e=!1);var t,n=d(this.files.slice());try{for(n.s();!(t=n.n()).done;){var i=t.value;(i.status!==s.UPLOADING||e)&&this.removeFile(i)}}catch(a){n.e(a)}finally{n.f()}return null}},{key:"resizeImage",value:function(e,t,n,i,a){var r=this;return this.createThumbnail(e,t,n,i,!0,function(t,n){if(null==n)return a(e);var i=r.options.resizeMimeType;null==i&&(i=e.type);var o=n.toDataURL(i,r.options.resizeQuality);return"image/jpeg"!==i&&"image/jpg"!==i||(o=x.restore(e.dataURL,o)),a(s.dataURItoBlob(o))})}},{key:"createThumbnail",value:function(e,t,n,i,s,a){var r=this,o=new FileReader;o.onload=function(){e.dataURL=o.result,"image/svg+xml"!==e.type?r.createThumbnailFromUrl(e,t,n,i,s,a):null!=a&&a(o.result)},o.readAsDataURL(e)}},{key:"displayExistingFile",value:function(e,t,n,i){var s=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];this.emit("addedfile",e),this.emit("complete",e),a?(e.dataURL=t,this.createThumbnailFromUrl(e,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.resizeMethod,this.options.fixOrientation,function(t){s.emit("thumbnail",e,t),n&&n()},i)):(this.emit("thumbnail",e,t),n&&n())}},{key:"createThumbnailFromUrl",value:function(e,t,n,i,s,a,r){var o=this,u=document.createElement("img");return r&&(u.crossOrigin=r),s="from-image"!=getComputedStyle(document.body).imageOrientation&&s,u.onload=function(){var r=function(e){return e(1)};return"undefined"!=typeof EXIF&&null!==EXIF&&s&&(r=function(e){return EXIF.getData(u,function(){return e(EXIF.getTag(this,"Orientation"))})}),r(function(s){e.width=u.width,e.height=u.height;var r=o.options.resize.call(o,e,t,n,i),l=document.createElement("canvas"),c=l.getContext("2d");switch(l.width=r.trgWidth,l.height=r.trgHeight,s>4&&(l.width=r.trgHeight,l.height=r.trgWidth),s){case 2:c.translate(l.width,0),c.scale(-1,1);break;case 3:c.translate(l.width,l.height),c.rotate(Math.PI);break;case 4:c.translate(0,l.height),c.scale(1,-1);break;case 5:c.rotate(.5*Math.PI),c.scale(1,-1);break;case 6:c.rotate(.5*Math.PI),c.translate(0,-l.width);break;case 7:c.rotate(.5*Math.PI),c.translate(l.height,-l.width),c.scale(-1,1);break;case 8:c.rotate(-.5*Math.PI),c.translate(-l.height,0)}C(c,u,null!=r.srcX?r.srcX:0,null!=r.srcY?r.srcY:0,r.srcWidth,r.srcHeight,null!=r.trgX?r.trgX:0,null!=r.trgY?r.trgY:0,r.trgWidth,r.trgHeight);var h=l.toDataURL("image/png");if(null!=a)return a(h,l)})},null!=a&&(u.onerror=a),u.src=e.dataURL}},{key:"processQueue",value:function(){var e=this.options.parallelUploads,t=this.getUploadingFiles().length,n=t;if(!(t>=e)){var i=this.getQueuedFiles();if(i.length>0){if(this.options.uploadMultiple)return this.processFiles(i.slice(0,e-t));for(;n<e;){if(!i.length)return;this.processFile(i.shift()),n++}}}}},{key:"processFile",value:function(e){return this.processFiles([e])}},{key:"processFiles",value:function(e){var t,n=d(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.processing=!0,i.status=s.UPLOADING,this.emit("processing",i)}}catch(a){n.e(a)}finally{n.f()}return this.options.uploadMultiple&&this.emit("processingmultiple",e),this.uploadFiles(e)}},{key:"_getFilesWithXhr",value:function(e){return this.files.filter(function(t){return t.xhr===e}).map(function(e){return e})}},{key:"cancelUpload",value:function(e){if(e.status===s.UPLOADING){var t,n=this._getFilesWithXhr(e.xhr),i=d(n);try{for(i.s();!(t=i.n()).done;)t.value.status=s.CANCELED}catch(u){i.e(u)}finally{i.f()}void 0!==e.xhr&&e.xhr.abort();var a,r=d(n);try{for(r.s();!(a=r.n()).done;){var o=a.value;this.emit("canceled",o)}}catch(u){r.e(u)}finally{r.f()}this.options.uploadMultiple&&this.emit("canceledmultiple",n)}else e.status!==s.ADDED&&e.status!==s.QUEUED||(e.status=s.CANCELED,this.emit("canceled",e),this.options.uploadMultiple&&this.emit("canceledmultiple",[e]));if(this.options.autoProcessQueue)return this.processQueue()}},{key:"resolveOption",value:function(e){if("function"==typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return e.apply(this,n)}return e}},{key:"uploadFile",value:function(e){return this.uploadFiles([e])}},{key:"uploadFiles",value:function(e){var t=this;this._transformFiles(e,function(n){if(t.options.chunking){var i=n[0];e[0].upload.chunked=t.options.chunking&&(t.options.forceChunking||i.size>t.options.chunkSize),e[0].upload.totalChunkCount=Math.ceil(i.size/t.options.chunkSize)}if(e[0].upload.chunked){var a=e[0],r=n[0];a.upload.chunks=[];var o=function(){for(var n=0;void 0!==a.upload.chunks[n];)n++;if(!(n>=a.upload.totalChunkCount)){var i=n*t.options.chunkSize,o=Math.min(i+t.options.chunkSize,r.size),u={name:t._getParamName(0),data:r.webkitSlice?r.webkitSlice(i,o):r.slice(i,o),filename:a.upload.filename,chunkIndex:n};a.upload.chunks[n]={file:a,index:n,dataBlock:u,status:s.UPLOADING,progress:0,retries:0},t._uploadData(e,[u])}};if(a.upload.finishedChunkUpload=function(n){var i=!0;n.status=s.SUCCESS,n.dataBlock=null,n.xhr=null;for(var r=0;r<a.upload.totalChunkCount;r++){if(void 0===a.upload.chunks[r])return o();a.upload.chunks[r].status!==s.SUCCESS&&(i=!1)}i&&t.options.chunksUploaded(a,function(){t._finished(e,"",null)})},t.options.parallelChunkUploads)for(var u=0;u<a.upload.totalChunkCount;u++)o();else o()}else{for(var l=[],c=0;c<e.length;c++)l[c]={name:t._getParamName(c),data:n[c],filename:e[c].upload.filename};t._uploadData(e,l)}})}},{key:"_getChunk",value:function(e,t){for(var n=0;n<e.upload.totalChunkCount;n++)if(void 0!==e.upload.chunks[n]&&e.upload.chunks[n].xhr===t)return e.upload.chunks[n]}},{key:"_uploadData",value:function(e,t){var n,i=this,a=new XMLHttpRequest,r=d(e);try{for(r.s();!(n=r.n()).done;)n.value.xhr=a}catch(k){r.e(k)}finally{r.f()}e[0].upload.chunked&&(e[0].upload.chunks[t[0].chunkIndex].xhr=a);var o=this.resolveOption(this.options.method,e),u=this.resolveOption(this.options.url,e);a.open(o,u,!0),a.timeout=this.resolveOption(this.options.timeout,e),a.withCredentials=!!this.options.withCredentials,a.onload=function(t){i._finishedUploading(e,a,t)},a.ontimeout=function(){i._handleUploadError(e,a,"Request timedout after ".concat(i.options.timeout/1e3," seconds"))},a.onerror=function(){i._handleUploadError(e,a)},(null!=a.upload?a.upload:a).onprogress=function(t){return i._updateFilesUploadProgress(e,a,t)};var l={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};for(var c in this.options.headers&&s.extend(l,this.options.headers),l){var h=l[c];h&&a.setRequestHeader(c,h)}var p=new FormData;if(this.options.params){var f=this.options.params;for(var m in"function"==typeof f&&(f=f.call(this,e,a,e[0].upload.chunked?this._getChunk(e[0],a):null)),f){var g=f[m];if(Array.isArray(g))for(var v=0;v<g.length;v++)p.append(m,g[v]);else p.append(m,g)}}var b,y=d(e);try{for(y.s();!(b=y.n()).done;){var A=b.value;this.emit("sending",A,a,p)}}catch(k){y.e(k)}finally{y.f()}this.options.uploadMultiple&&this.emit("sendingmultiple",e,a,p),this._addFormElementData(p);for(var C=0;C<t.length;C++){var x=t[C];p.append(x.name,x.data,x.filename)}this.submitRequest(a,p,e)}},{key:"_transformFiles",value:function(e,t){for(var n=this,i=[],s=0,a=function(a){n.options.transformFile.call(n,e[a],function(n){i[a]=n,++s===e.length&&t(i)})},r=0;r<e.length;r++)a(r)}},{key:"_addFormElementData",value:function(e){if("FORM"===this.element.tagName){var t,n=d(this.element.querySelectorAll("input, textarea, select, button"));try{for(n.s();!(t=n.n()).done;){var i=t.value,s=i.getAttribute("name"),a=i.getAttribute("type");if(a&&(a=a.toLowerCase()),null!=s)if("SELECT"===i.tagName&&i.hasAttribute("multiple")){var r,o=d(i.options);try{for(o.s();!(r=o.n()).done;){var u=r.value;u.selected&&e.append(s,u.value)}}catch(l){o.e(l)}finally{o.f()}}else(!a||"checkbox"!==a&&"radio"!==a||i.checked)&&e.append(s,i.value)}}catch(l){n.e(l)}finally{n.f()}}}},{key:"_updateFilesUploadProgress",value:function(e,t,n){var i;if(void 0!==n){if(i=100*n.loaded/n.total,e[0].upload.chunked){var s=e[0],a=this._getChunk(s,t);a.progress=i,a.total=n.total,a.bytesSent=n.loaded,s.upload.progress=0,s.upload.total=0,s.upload.bytesSent=0;for(var r=0;r<s.upload.totalChunkCount;r++)void 0!==s.upload.chunks[r]&&void 0!==s.upload.chunks[r].progress&&(s.upload.progress+=s.upload.chunks[r].progress,s.upload.total+=s.upload.chunks[r].total,s.upload.bytesSent+=s.upload.chunks[r].bytesSent);s.upload.progress=s.upload.progress/s.upload.totalChunkCount}else{var o,u=d(e);try{for(u.s();!(o=u.n()).done;){var l=o.value;l.upload.progress=i,l.upload.total=n.total,l.upload.bytesSent=n.loaded}}catch(C){u.e(C)}finally{u.f()}}var c,h=d(e);try{for(h.s();!(c=h.n()).done;){var p=c.value;this.emit("uploadprogress",p,p.upload.progress,p.upload.bytesSent)}}catch(C){h.e(C)}finally{h.f()}}else{var f=!0;i=100;var m,g=d(e);try{for(g.s();!(m=g.n()).done;){var v=m.value;100===v.upload.progress&&v.upload.bytesSent===v.upload.total||(f=!1),v.upload.progress=i,v.upload.bytesSent=v.upload.total}}catch(C){g.e(C)}finally{g.f()}if(f)return;var b,y=d(e);try{for(y.s();!(b=y.n()).done;){var A=b.value;this.emit("uploadprogress",A,i,A.upload.bytesSent)}}catch(C){y.e(C)}finally{y.f()}}}},{key:"_finishedUploading",value:function(e,t,n){var i;if(e[0].status!==s.CANCELED&&4===t.readyState){if("arraybuffer"!==t.responseType&&"blob"!==t.responseType&&(i=t.responseText,t.getResponseHeader("content-type")&&~t.getResponseHeader("content-type").indexOf("application/json")))try{i=JSON.parse(i)}catch(a){n=a,i="Invalid JSON response from server."}this._updateFilesUploadProgress(e),200<=t.status&&t.status<300?e[0].upload.chunked?e[0].upload.finishedChunkUpload(this._getChunk(e[0],t)):this._finished(e,i,n):this._handleUploadError(e,t,i)}}},{key:"_handleUploadError",value:function(e,t,n){if(e[0].status!==s.CANCELED){if(e[0].upload.chunked&&this.options.retryChunks){var i=this._getChunk(e[0],t);if(i.retries++<this.options.retryChunksLimit)return void this._uploadData(e,[i.dataBlock]);console.warn("Retried this chunk too often. Giving up.")}this._errorProcessing(e,n||this.options.dictResponseError.replace("{{statusCode}}",t.status),t)}}},{key:"submitRequest",value:function(e,t,n){e.send(t)}},{key:"_finished",value:function(e,t,n){var i,a=d(e);try{for(a.s();!(i=a.n()).done;){var r=i.value;r.status=s.SUCCESS,this.emit("success",r,t,n),this.emit("complete",r)}}catch(o){a.e(o)}finally{a.f()}if(this.options.uploadMultiple&&(this.emit("successmultiple",e,t,n),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()}},{key:"_errorProcessing",value:function(e,t,n){var i,a=d(e);try{for(a.s();!(i=a.n()).done;){var r=i.value;r.status=s.ERROR,this.emit("error",r,t,n),this.emit("complete",r)}}catch(o){a.e(o)}finally{a.f()}if(this.options.uploadMultiple&&(this.emit("errormultiple",e,t,n),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()}}],[{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}}]),s}();b.initClass(),b.version="5.7.2",b.options={},b.optionsForElement=function(e){return e.getAttribute("id")?b.options[A(e.getAttribute("id"))]:void 0},b.instances=[],b.forElement=function(e){if("string"==typeof e&&(e=document.querySelector(e)),null==(null!=e?e.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return e.dropzone},b.autoDiscover=!0,b.discover=function(){var e;if(document.querySelectorAll)e=document.querySelectorAll(".dropzone");else{e=[];var t=function(t){return function(){var n,i=[],s=d(t);try{for(s.s();!(n=s.n()).done;){var a=n.value;/(^| )dropzone($| )/.test(a.className)?i.push(e.push(a)):i.push(void 0)}}catch(r){s.e(r)}finally{s.f()}return i}()};t(document.getElementsByTagName("div")),t(document.getElementsByTagName("form"))}return function(){var t,n=[],i=d(e);try{for(i.s();!(t=i.n()).done;){var s=t.value;!1!==b.optionsForElement(s)?n.push(new b(s)):n.push(void 0)}}catch(a){i.e(a)}finally{i.f()}return n}()},b.blacklistedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i],b.isBrowserSupported=function(){var e=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a")){var t,n=d(b.blacklistedBrowsers);try{for(n.s();!(t=n.n()).done;)t.value.test(navigator.userAgent)&&(e=!1)}catch(i){n.e(i)}finally{n.f()}}else e=!1;else e=!1;return e},b.dataURItoBlob=function(e){for(var t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(t.length),s=new Uint8Array(i),a=0,r=t.length,o=0<=r;o?a<=r:a>=r;o?a++:a--)s[a]=t.charCodeAt(a);return new Blob([i],{type:n})};var y=function(e,t){return e.filter(function(e){return e!==t}).map(function(e){return e})},A=function(e){return e.replace(/[\-_](\w)/g,function(e){return e.charAt(1).toUpperCase()})};b.createElement=function(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes[0]},b.elementInside=function(e,t){if(e===t)return!0;for(;e=e.parentNode;)if(e===t)return!0;return!1},b.getElement=function(e,t){var n;if("string"==typeof e?n=document.querySelector(e):null!=e.nodeType&&(n=e),null==n)throw new Error("Invalid `".concat(t,"` option provided. Please provide a CSS selector or a plain HTML element."));return n},b.getElements=function(e,t){var n,i;if(e instanceof Array){i=[];try{var s,a=d(e);try{for(a.s();!(s=a.n()).done;)n=s.value,i.push(this.getElement(n,t))}catch(u){a.e(u)}finally{a.f()}}catch(l){i=null}}else if("string"==typeof e){i=[];var r,o=d(document.querySelectorAll(e));try{for(o.s();!(r=o.n()).done;)n=r.value,i.push(n)}catch(u){o.e(u)}finally{o.f()}}else null!=e.nodeType&&(i=[e]);if(null==i||!i.length)throw new Error("Invalid `".concat(t,"` option provided. Please provide a CSS selector, a plain HTML element or a list of those."));return i},b.confirm=function(e,t,n){return window.confirm(e)?t():null!=n?n():void 0},b.isValidFile=function(e,t){if(!t)return!0;t=t.split(",");var n,i=e.type,s=i.replace(/\/.*$/,""),a=d(t);try{for(a.s();!(n=a.n()).done;){var r=n.value;if("."===(r=r.trim()).charAt(0)){if(-1!==e.name.toLowerCase().indexOf(r.toLowerCase(),e.name.length-r.length))return!0}else if(/\/\*$/.test(r)){if(s===r.replace(/\/.*$/,""))return!0}else if(i===r)return!0}}catch(o){a.e(o)}finally{a.f()}return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(e){return this.each(function(){return new b(this,e)})}),null!==r?r.exports=b:window.Dropzone=b,b.ADDED="added",b.QUEUED="queued",b.ACCEPTED=b.QUEUED,b.UPLOADING="uploading",b.PROCESSING=b.UPLOADING,b.CANCELED="canceled",b.ERROR="error",b.SUCCESS="success";var C=function(e,t,n,i,s,a,r,o,u,l){var c=function(e){e.naturalWidth;var t=e.naturalHeight,n=document.createElement("canvas");n.width=1,n.height=t;var i=n.getContext("2d");i.drawImage(e,0,0);for(var s=i.getImageData(1,0,1,t).data,a=0,r=t,o=t;o>a;)0===s[4*(o-1)+3]?r=o:a=o,o=r+a>>1;var u=o/t;return 0===u?1:u}(t);return e.drawImage(t,n,i,s,a,r,o,u,l/c)},x=function(){function e(){f(this,e)}return g(e,null,[{key:"initClass",value:function(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}},{key:"encode64",value:function(e){for(var t="",n=void 0,i=void 0,s="",a=void 0,r=void 0,o=void 0,u="",l=0;a=(n=e[l++])>>2,r=(3&n)<<4|(i=e[l++])>>4,o=(15&i)<<2|(s=e[l++])>>6,u=63&s,isNaN(i)?o=u=64:isNaN(s)&&(u=64),t=t+this.KEY_STR.charAt(a)+this.KEY_STR.charAt(r)+this.KEY_STR.charAt(o)+this.KEY_STR.charAt(u),n=i=s="",a=r=o=u="",l<e.length;);return t}},{key:"restore",value:function(e,t){if(!e.match("data:image/jpeg;base64,"))return t;var n=this.decode64(e.replace("data:image/jpeg;base64,","")),i=this.slice2Segments(n),s=this.exifManipulation(t,i);return"data:image/jpeg;base64,".concat(this.encode64(s))}},{key:"exifManipulation",value:function(e,t){var n=this.getExifArray(t),i=this.insertExif(e,n);return new Uint8Array(i)}},{key:"getExifArray",value:function(e){for(var t=void 0,n=0;n<e.length;){if(255===(t=e[n])[0]&225===t[1])return t;n++}return[]}},{key:"insertExif",value:function(e,t){var n=e.replace("data:image/jpeg;base64,",""),i=this.decode64(n),s=i.indexOf(255,3),a=i.slice(0,s),r=i.slice(s),o=a;return(o=o.concat(t)).concat(r)}},{key:"slice2Segments",value:function(e){for(var t=0,n=[];!(255===e[t]&218===e[t+1]);){if(255===e[t]&216===e[t+1])t+=2;else{var i=t+(256*e[t+2]+e[t+3])+2,s=e.slice(t,i);n.push(s),t=i}if(t>e.length)break}return n}},{key:"decode64",value:function(e){var t=void 0,n=void 0,i="",s=void 0,a=void 0,r="",o=0,u=[];for(/[^A-Za-z0-9\+\/\=]/g.exec(e)&&console.warn("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");t=this.KEY_STR.indexOf(e.charAt(o++))<<2|(s=this.KEY_STR.indexOf(e.charAt(o++)))>>4,n=(15&s)<<4|(a=this.KEY_STR.indexOf(e.charAt(o++)))>>2,i=(3&a)<<6|(r=this.KEY_STR.indexOf(e.charAt(o++))),u.push(t),64!==a&&u.push(n),64!==r&&u.push(i),t=n=i="",s=a=r="",o<e.length;);return u}}]),e}();x.initClass(),b._autoDiscoverFunction=function(){if(b.autoDiscover)return b.discover()},function(e,t){var n=!1,i=!0,s=e.document,a=s.documentElement,r=s.addEventListener?"addEventListener":"attachEvent",o=s.addEventListener?"removeEventListener":"detachEvent",u=s.addEventListener?"":"on",l=function i(a){if("readystatechange"!==a.type||"complete"===s.readyState)return("load"===a.type?e:s)[o](u+a.type,i,!1),!n&&(n=!0)?t.call(e,a.type||a):void 0};if("complete"!==s.readyState){if(s.createEventObject&&a.doScroll){try{i=!e.frameElement}catch(c){}i&&function e(){try{a.doScroll("left")}catch(t){return void setTimeout(e,50)}return l("poll")}()}s[r](u+"DOMContentLoaded",l,!1),s[r](u+"readystatechange",l,!1),e[r](u+"load",l,!1)}}(window,b._autoDiscoverFunction),r=r.exports;var k={autoProcessQueue:!1,autoDiscover:!1,clickable:".dropzone__avatar",url:"/login",maxFilesize:.5,maxFiles:1,uploadMultiple:!1,acceptedFiles:"image/*",resizeWidth:150,resizeHeight:150,resizeMethod:"crop",previewsContainer:".dropzone__avatar",previewTemplate:'<div class="dropzone__preview">\n\t\t\t<img class="dropzone__thumbnail" data-dz-thumbnail>\n\t\t\t<button class="btn btn--remove avatar__btn btn--iconsmall" data-dz-remove>\n\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" version="1" viewBox="0 0 299 299">\n\t\t\t\t\t<path d="M299 30L268 0 149 119 30 0 0 30l119 119L0 268l30 31 119-119 119 119 31-31-119-119z"/>\n\t\t\t\t</svg>\n\t\t\t</button>',dictFileTooBig:"File is too big (limit: 500 KB)",dictInvalidFileType:"Only images, please",dictResponseError:"Error {{statusCode }}",init:function(){this.on("error",function(e,t,n){if(n)t=null;else{if(t==this.options.dictMaxFilesExceeded)return;this.removeFile(e),this.element.querySelector(".dropzone__message--error").textContent=t}}),this.on("maxfilesexceeded",function(e){this.removeAllFiles(),this.addFile(e)}),this.on("addedfile",function(){this.files.length>0&&(this.element.querySelector(".dropzone__message--error").textContent="")}),this.on("reset",function(){this.element.querySelector(".dropzone__message--error").textContent=""})}},w={};function E(e){if(!e.ok)throw Error(e.statusText?e.statusText:e.status);return e}w.getByIP=function(){return fetch("https://ipapi.co/json").then(E).then(e=>e.json()).then(e=>({city:e.city,region:e.region,country:e.country_name})).catch(e=>{throw e})},w.getByGeo=function(){var e=setTimeout(function(){console.error("Connection timeout")},5e4);return new Promise((t,n)=>{navigator.geolocation.getCurrentPosition(n=>t(function(t){return clearTimeout(e),fetch(`https://nominatim.openstreetmap.org/reverse?lat=${t.coords.latitude}&lon=${t.coords.longitude}&format=json&zoom=10&accept-language=en`).then(E).then(e=>e.json()).then(e=>({city:e.address.city,region:e.address.state?e.address.state:"",country:e.address.country}))}(n)),e=>n(e),{timeout:5e4})})};var _;const F=t.assets.BLANK_PIXEL;r.autoDiscover=!1,_=class extends a{constructor(e){super(e),this.el=e}setup(){this.formel=this.el.querySelector("form"),this.nameInput=this.el.querySelector(".login__name"),this.locationInput=this.el.querySelector(".login__location"),this.locationSource=this.el.querySelector(".login__location-source"),this.locationEdit=this.el.querySelector(".login__location-edit"),this.locateBtn=this.el.querySelector(".login__locate-btn"),this.submitBtn=this.el.querySelector(".login__submit"),super.setup(),this.prefillData(),!localStorage.getItem("user_location")&&this.getLocation(),this.formel.addEventListener("submit",e=>{e.preventDefault(),this.clearError(),this.sendLoginData()}),this.locationEdit.addEventListener("click",e=>{e.preventDefault(),this.locationInput.disabled=!1,this.locationInput.focus()}),this.locateBtn.addEventListener("click",e=>{e.preventDefault(),this.getLocationByGeo()}),this.dropzone=new r("#loginForm",k),this.initDropzone()}initDropzone(){this.dropzone.on("success",()=>{this.controller.onLoginSuccess(),this.close()}),this.dropzone.on("error",(e,t,n)=>{if(n)switch(n.status){case 409:case 422:this.displayError(t);break;default:this.displayError("Server error, please reload page and try again")}})}sendLoginData(){let e;this.locationInput.disabled=!1;let t=new FormData(this.formel);localStorage.clear();for(let i of t.entries())localStorage.setItem(i[0],i[1]),"user_name"===i[0]&&(e=i[1]);if(this.dropzone.getQueuedFiles().length>0){let t=this.dropzone.files[0];this.dropzone.files[0].upload.filename=`avatar_${e}_${(new Date).getTime()}${t.name.substring(t.name.lastIndexOf("."))}`,this.dropzone.processQueue();let n=this.dropzone.getAcceptedFiles()[0]?""+this.dropzone.getAcceptedFiles()[0].upload.filename:F;localStorage.setItem("user_avatar",n)}else{var n=new Blob;n.upload={chunked:this.dropzone.defaultOptions.chunking},n.upload.filename="mockfile",this.dropzone.uploadFile(n)}}prefillData(){let e=this.controller.getUserData();e.username&&(this.nameInput.value=e.username),e.user_location&&(this.locationInput.value=e.user_location)}getLocation(){w.getByIP().then(e=>this.displayLocation(e,"ip")).catch(e=>{throw Error(e)})}getLocationByGeo(){w.getByGeo().then(e=>this.displayLocation(e,"geo")).catch(e=>{throw Error(e)})}displayLocation(e,t){this.locationInput.value=e.city,e.region&&(this.locationInput.value+=`, ${e.region}`),e.country&&(this.locationInput.value+=`, ${e.country}`),this.displayLocationSource(t)}displayLocationSource(e){let t;switch(e){case"ip":t="Autodetected based on your IP"+String.fromCharCode(160);break;case"geo":t="Autodetected based on your geolocation"+String.fromCharCode(160);break;default:t=""}this.locationSource.textContent=t}};var S,D=class{constructor(e,t){this.el=e,this.buttons=t}setup(){this.contentContainer=this.el.querySelector(".sidebar__content"),this.buttons&&(this.btnClose=this.buttons.btnClose||this.el.querySelector(".sidebar__btn--close"),this.btnOpen=this.buttons.btnOpen||this.el.querySelector(".sidebar__btn--open"),this.btnToggle=this.buttons.btnToggle||this.el.querySelector(".sidebar__btn--toggle")),this.btnClose&&this.btnClose.addEventListener("click",()=>this.close()),this.btnOpen&&this.btnOpen.addEventListener("click",()=>this.open()),this.btnToggle&&this.btnToggle.addEventListener("click",()=>this.toggle()),this.isOpen=!!this.el.classList.contains("sidebar--open"),this.el.addEventListener("focusin",()=>this.open()),this.el.addEventListener("focusout",()=>this.close())}open(){this.isOpen||(this.controller.closeAllSidebars(),this.el.classList.add("sidebar--open"),this.el.setAttribute("aria-hidden","false"),this.btnToggle&&this.btnToggle.classList.add("is-active"),this.isOpen=!0)}close(){this.el.classList.remove("sidebar--open"),this.el.setAttribute("aria-hidden","true"),this.btnToggle&&this.btnToggle.classList.remove("is-active"),this.isOpen=!1}toggle(){this.isOpen?this.close():this.open()}setContent(e){this.contentContainer.innerHTML=e,this.isOpen||this.open()}displayUpdates(){this.btnToggle.classList.add("has-updates")}resetUpdates(){this.btnToggle.classList.remove("has-updates")}},B={exports:{}};S=function(){return function(e){function t(i){if(n[i])return n[i].exports;var s=n[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=i(n(1)),o=i(n(2)),u=i(n(3)),l=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),c=window.parent!==window.self,h=void 0,d=function(){function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.sel=t;var i=void 0,s=void 0,a=window.Dropkick;for("string"==typeof this.sel&&"#"===this.sel[0]&&(this.sel=document.getElementById(t.substr(1))),i=0;i<a.uid;i++)if((s=a.cache[i])instanceof e&&s.data.select===this.sel)return r.default.extend(s.data.settings,n),s;if(!this.sel)throw"You must pass a select to DropKick";if(this.sel.length<1)throw"You must have options inside your <select>: "+t;if("SELECT"===this.sel.nodeName)return this.init(this.sel,n)}return a(e,[{key:"init",value:function(t,n){var i,s=window.Dropkick,a=e.build(t,"dk"+s.uid);if(this.data={},this.data.select=t,this.data.elem=a.elem,this.data.settings=r.default.extend({},o.default,n),this.disabled=t.disabled,this.form=t.form,this.length=t.length,this.multiple=t.multiple,this.options=a.options.slice(0),this.selectedIndex=t.selectedIndex,this.selectedOptions=a.selected.slice(0),this.value=t.value,this.data.cacheID=s.uid,s.cache[this.data.cacheID]=this,this.data.settings.initialize.call(this),s.uid+=1,this._changeListener||(t.addEventListener("change",this),this._changeListener=!0),!l||this.data.settings.mobile){if(t.parentNode.insertBefore(this.data.elem,t),t.setAttribute("data-dkCacheId",this.data.cacheID),this.data.elem.addEventListener("click",this),this.data.elem.addEventListener("keydown",this),this.data.elem.addEventListener("keypress",this),this.form&&this.form.addEventListener("reset",this),!this.multiple)for(i=0;i<this.options.length;i++)this.options[i].addEventListener("mouseover",this);h||(document.addEventListener("click",e.onDocClick),c&&parent.document.addEventListener("click",e.onDocClick),h=!0)}return this}},{key:"add",value:function(e,t){var n,i,s;"string"==typeof e&&(n=e,(e=document.createElement("option")).text=n),"OPTION"===e.nodeName&&(i=r.default.create("li",{class:"dk-option","data-value":e.value,text:e.text,innerHTML:e.innerHTML,role:"option","aria-selected":"false",id:"dk"+this.data.cacheID+"-"+(e.id||e.value.replace(" ","-"))}),r.default.addClass(i,e.className),this.length+=1,e.disabled&&(r.default.addClass(i,"dk-option-disabled"),i.setAttribute("aria-disabled","true")),e.hidden&&(r.default.addClass(i,"dk-option-hidden"),i.setAttribute("aria-hidden","true")),this.data.select.add(e,t),"number"==typeof t&&(t=this.item(t)),(s=this.options.indexOf(t))>-1?(t.parentNode.insertBefore(i,t),this.options.splice(s,0,i)):(this.data.elem.lastChild.appendChild(i),this.options.push(i)),i.addEventListener("mouseover",this),e.selected&&this.select(s))}},{key:"item",value:function(e){return e=e<0?this.options.length+e:e,this.options[e]||null}},{key:"remove",value:function(e){var t=this.item(e);t.parentNode.removeChild(t),this.options.splice(e,1),this.data.select.remove(e),this.select(this.data.select.selectedIndex),this.length-=1}},{key:"close",value:function(){var e,t=this.data.elem;if(!this.isOpen||this.multiple)return!1;for(e=0;e<this.options.length;e++)r.default.removeClass(this.options[e],"dk-option-highlight");t.lastChild.setAttribute("aria-expanded","false"),r.default.removeClass(t.lastChild,"dk-select-options-highlight"),r.default.removeClass(t,"dk-select-open-(up|down)"),this.isOpen=!1,this.data.settings.close.call(this)}},{key:"open",value:function(){var e,t,n,i,s=this.data.elem,a=s.lastChild,o=void 0!==window.pageXOffset,u="CSS1Compat"===(document.compatMode||""),l=o?window.pageYOffset:u?document.documentElement.scrollTop:document.body.scrollTop;if(n=r.default.offset(s).top-l,i=window.innerHeight-(n+s.offsetHeight),this.isOpen||this.multiple)return!1;a.style.display="block",e=a.offsetHeight,a.style.display="",t=n>e&&!(i>e)?"-up":"-down",this.isOpen=!0,r.default.addClass(s,"dk-select-open"+t),a.setAttribute("aria-expanded","true"),this._scrollTo(this.options.length-1),this._scrollTo(this.selectedIndex),this.data.settings.open.call(this)}},{key:"disable",value:function(e,t){var n="dk-option-disabled";0!==arguments.length&&"boolean"!=typeof e||(t=void 0===e,e=this.data.elem,n="dk-select-disabled",this.disabled=t),void 0===t&&(t=!0),"number"==typeof e&&(e=this.item(e)),t?(e.setAttribute("aria-disabled",!0),r.default.addClass(e,n)):(e.setAttribute("aria-disabled",!1),r.default.removeClass(e,n))}},{key:"hide",value:function(e,t){void 0===t&&(t=!0),e=this.item(e),t?(e.setAttribute("aria-hidden",!0),r.default.addClass(e,"dk-option-hidden")):(e.setAttribute("aria-hidden",!1),r.default.removeClass(e,"dk-option-hidden"))}},{key:"select",value:function(e,t){var n,i,s,a,o=this.data.select;if("number"==typeof e&&(e=this.item(e)),"string"==typeof e)for(n=0;n<this.length;n++)this.options[n].getAttribute("data-value")===e&&(e=this.options[n]);return!(!e||"string"==typeof e||!t&&r.default.hasClass(e,"dk-option-disabled"))&&(r.default.hasClass(e,"dk-option")?(i=this.options.indexOf(e),s=o.options[i],this.multiple?(r.default.toggleClass(e,"dk-option-selected"),s.selected=!s.selected,r.default.hasClass(e,"dk-option-selected")?(e.setAttribute("aria-selected","true"),this.selectedOptions.push(e)):(e.setAttribute("aria-selected","false"),i=this.selectedOptions.indexOf(e),this.selectedOptions.splice(i,1))):(a=this.data.elem.firstChild,this.selectedOptions.length&&(r.default.removeClass(this.selectedOptions[0],"dk-option-selected"),this.selectedOptions[0].setAttribute("aria-selected","false")),r.default.addClass(e,"dk-option-selected"),e.setAttribute("aria-selected","true"),a.setAttribute("aria-activedescendant",e.id),a.className="dk-selected "+s.className,a.innerHTML=s.innerHTML,this.selectedOptions[0]=e,s.selected=!0),this.selectedIndex=o.selectedIndex,this.value=o.value,t||this.data.select.dispatchEvent(new u.default("change",{bubbles:this.data.settings.bubble})),e):void 0)}},{key:"selectOne",value:function(e,t){return this.reset(!0),this._scrollTo(e),this.select(e,t)}},{key:"search",value:function(e,t){var n,i,s,a,r,o,u,l,c=this.data.select.options,h=[];if(!e)return this.options;for(t="fuzzy"===(t=t?t.toLowerCase():"strict")?2:"partial"===t?1:0,l=new RegExp((t?"":"^")+e,"i"),n=0;n<c.length;n++)if(s=c[n].text.toLowerCase(),2==t){for(i=e.toLowerCase().split(""),a=r=o=u=0;r<s.length;)s[r]===i[a]?(o+=1+o,a++):o=0,u+=o,r++;a===i.length&&h.push({e:this.options[n],s:u,i:n})}else l.test(s)&&h.push(this.options[n]);return 2===t&&(h=h.sort(function(e,t){return t.s-e.s||e.i-t.i}).reduce(function(e,t){return e[e.length]=t.e,e},[])),h}},{key:"focus",value:function(){this.disabled||(this.multiple?this.data.elem:this.data.elem.children[0]).focus()}},{key:"reset",value:function(e){var t,n=this.data.select;for(this.selectedOptions.length=0,t=0;t<n.options.length;t++)n.options[t].selected=!1,r.default.removeClass(this.options[t],"dk-option-selected"),this.options[t].setAttribute("aria-selected","false"),!e&&n.options[t].defaultSelected&&this.select(t,!0);this.selectedOptions.length||this.multiple||this.select(0,!0)}},{key:"refresh",value:function(){Object.keys(this).length>0&&(!l||this.data.settings.mobile)&&this.dispose().init(this.data.select,this.data.settings)}},{key:"dispose",value:function(){var e=window.Dropkick;return Object.keys(this).length>0&&(!l||this.data.settings.mobile)&&(delete e.cache[this.data.cacheID],this.data.elem.parentNode.removeChild(this.data.elem),this.data.select.removeAttribute("data-dkCacheId")),this}},{key:"handleEvent",value:function(e){if(!this.disabled)switch(e.type){case"click":this._delegate(e);break;case"keydown":this._keyHandler(e);break;case"keypress":this._searchOptions(e);break;case"mouseover":this._highlight(e);break;case"reset":this.reset();break;case"change":this.data.settings.change.call(this)}}},{key:"_delegate",value:function(e){var t,n,i,s,a=e.target;if(r.default.hasClass(a,"dk-option-disabled"))return!1;if(this.multiple){if(r.default.hasClass(a,"dk-option"))if("Range"===(t=window.getSelection()).type&&t.collapseToStart(),e.shiftKey)if(i=this.options.indexOf(this.selectedOptions[0]),s=this.options.indexOf(this.selectedOptions[this.selectedOptions.length-1]),(n=this.options.indexOf(a))>i&&n<s&&(n=i),n>s&&s>i&&(s=i),this.reset(!0),s>n)for(;n<s+1;)this.select(n++);else for(;n>s-1;)this.select(n--);else e.ctrlKey||e.metaKey?this.select(a):(this.reset(!0),this.select(a))}else this[this.isOpen?"close":"open"](),r.default.hasClass(a,"dk-option")&&this.select(a)}},{key:"_highlight",value:function(e){var t,n=e.target;if(!this.multiple){for(t=0;t<this.options.length;t++)r.default.removeClass(this.options[t],"dk-option-highlight");r.default.addClass(this.data.elem.lastChild,"dk-select-options-highlight"),r.default.addClass(n,"dk-option-highlight")}}},{key:"_keyHandler",value:function(e){var t,n,i=this.selectedOptions,s=this.options,a=1;switch(e.keyCode){case 38:a=-1;case 40:if(e.preventDefault(),t=i[i.length-1],r.default.hasClass(this.data.elem.lastChild,"dk-select-options-highlight"))for(r.default.removeClass(this.data.elem.lastChild,"dk-select-options-highlight"),n=0;n<s.length;n++)r.default.hasClass(s[n],"dk-option-highlight")&&(r.default.removeClass(s[n],"dk-option-highlight"),t=s[n]);(a=s.indexOf(t)+a)>s.length-1?a=s.length-1:a<0&&(a=0),this.data.select.options[a].disabled||(this.reset(!0),this.select(a),this._scrollTo(a));break;case 32:if(!this.isOpen){e.preventDefault(),this.open();break}case 9:case 13:for(a=0;a<s.length;a++)r.default.hasClass(s[a],"dk-option-highlight")&&this.select(a);case 27:this.isOpen&&(e.preventDefault(),this.close())}}},{key:"_searchOptions",value:function(e){var t,n=this,i=String.fromCharCode(e.keyCode||e.which);void 0===this.data.searchString&&(this.data.searchString=""),n.data.searchTimeout&&clearTimeout(n.data.searchTimeout),n.data.searchTimeout=setTimeout(function(){n.data.searchString=""},1e3),this.data.searchString+=i,(t=this.search(this.data.searchString,this.data.settings.search)).length&&(r.default.hasClass(t[0],"dk-option-disabled")||this.selectOne(t[0]))}},{key:"_scrollTo",value:function(e){var t,n,i=this.data.elem.lastChild;if(-1===e||"number"!=typeof e&&!e||!this.isOpen&&!this.multiple)return!1;"number"==typeof e&&(e=this.item(e)),(n=(t=r.default.position(e,i).top)-i.scrollTop)+e.offsetHeight>i.offsetHeight?(t+=e.offsetHeight,i.scrollTop=t-i.offsetHeight):n<0&&(i.scrollTop=t)}}]),e}();window.Dropkick=d,window.Dropkick.cache={},window.Dropkick.uid=0,d.build=function(e,t){var n,i,s,a=[],o={elem:null,options:[],selected:[]};for(o.elem=r.default.create("div",{class:"dk-select"+(e.multiple?"-multi":"")}),i=r.default.create("ul",{class:"dk-select-options",id:t+"-listbox",role:"listbox"}),e.disabled&&(r.default.addClass(o.elem,"dk-select-disabled"),o.elem.setAttribute("aria-disabled",!0)),o.elem.id=t+(e.id?"-"+e.id:""),r.default.addClass(o.elem,e.className),e.multiple?(o.elem.setAttribute("tabindex",e.getAttribute("tabindex")||"0"),i.setAttribute("aria-multiselectable","true")):(n=e.options[e.selectedIndex],o.elem.appendChild(r.default.create("div",{class:"dk-selected "+(n?n.className:""),tabindex:e.tabindex||0,innerHTML:n?n.text:"&nbsp;",id:t+"-combobox","aria-live":"assertive","aria-owns":i.id,role:"combobox"})),i.setAttribute("aria-expanded","false")),s=e.children.length;s--;a.unshift(e.children[s]));return a.forEach(function e(n){var i,s,a,u,l=[];switch(n.nodeName){case"OPTION":i=r.default.create("li",{class:"dk-option ","data-value":n.value,text:n.text,innerHTML:n.innerHTML,role:"option","aria-selected":"false",id:t+"-"+(n.id||n.value.replace(" ","-"))}),r.default.addClass(i,n.className),n.disabled&&(r.default.addClass(i,"dk-option-disabled"),i.setAttribute("aria-disabled","true")),n.hidden&&(r.default.addClass(i,"dk-option-hidden"),i.setAttribute("aria-hidden","true")),n.selected&&(r.default.addClass(i,"dk-option-selected"),i.setAttribute("aria-selected","true"),o.selected.push(i)),o.options.push(this.appendChild(i));break;case"OPTGROUP":for(s=r.default.create("li",{class:"dk-optgroup"}),n.label&&s.appendChild(r.default.create("div",{class:"dk-optgroup-label",innerHTML:n.label})),a=r.default.create("ul",{class:"dk-optgroup-options"}),u=n.children.length;u--;l.unshift(n.children[u]));n.disabled&&(s.classList.add("dk-optgroup-disabled"),l.forEach(function(e){e.disabled=n.disabled})),l.forEach(e,a),this.appendChild(s).appendChild(a)}},o.elem.appendChild(i)),o},d.onDocClick=function(e){var t,n,i=window.Dropkick;if(1!==e.target.nodeType)return!1;for(n in null!==(t=e.target.getAttribute("data-dkcacheid"))&&i.cache[t].focus(),i.cache)r.default.closest(e.target,i.cache[n].data.elem)||n===t||i.cache[n].disabled||i.cache[n].close()},void 0!==window.jQuery&&(window.jQuery.fn.dropkick=function(){var e=Array.prototype.slice.call(arguments);return jQuery(this).each(function(){e[0]&&"object"!==s(e[0])?"string"==typeof e[0]&&d.prototype[e[0]].apply(new d(this),e.slice(1)):new d(this,e[0]||{})})}),t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=-1!==navigator.appVersion.indexOf("MSIE"),s={hasClass:function(e,t){var n=new RegExp("(^|\\s+)"+t+"(\\s+|$)");return e&&n.test(e.className)},addClass:function(e,t){e&&!this.hasClass(e,t)&&(e.className+=" "+t)},removeClass:function(e,t){var n=new RegExp("(^|\\s+)"+t+"(\\s+|$)");e&&(e.className=e.className.replace(n," "))},toggleClass:function(e,t){[(this.hasClass(e,t)?"remove":"add")+"Class"](e,t)},extend:function(e){return Array.prototype.slice.call(arguments,1).forEach(function(t){if(t)for(var n in t)e[n]=t[n]}),e},offset:function(e){var t=e.getBoundingClientRect()||{top:0,left:0},n=document.documentElement,s=i?n.scrollTop:window.pageYOffset,a=i?n.scrollLeft:window.pageXOffset;return{top:t.top+s-n.clientTop,left:t.left+a-n.clientLeft}},position:function(e,t){for(var n={top:0,left:0};e&&e!==t;)n.top+=e.offsetTop,n.left+=e.offsetLeft,e=e.parentNode;return n},closest:function(e,t){for(;e;){if(e===t)return e;e=e.parentNode}return!1},create:function(e,t){var n=void 0,i=document.createElement(e);for(n in t||(t={}),t)t.hasOwnProperty(n)&&("innerHTML"===n?i.innerHTML=t[n]:i.setAttribute(n,t[n]));return i},deferred:function(e){return function(){var t=this,n=arguments;window.setTimeout(function(){e.apply(t,n)},1)}}};t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={initialize:function(){},mobile:!0,change:function(){},open:function(){},close:function(){},search:"strict",bubble:!0}},function(e,t,n){(function(t){var n=t.CustomEvent;e.exports=function(){try{var e=new n("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}return!1}()?n:"undefined"!=typeof document&&"function"==typeof document.createEvent?function(e,t){var n=document.createEvent("CustomEvent");return t?n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):n.initCustomEvent(e,!1,!1,void 0),n}:function(e,t){var n=document.createEventObject();return n.type=e,t?(n.bubbles=Boolean(t.bubbles),n.cancelable=Boolean(t.cancelable),n.detail=t.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n}}).call(t,n(4))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n}])},"object"==typeof B.exports?B.exports=S():"function"==typeof define&&define.amd?define([],S):"object"==typeof B.exports?B.exports.dropkickjs=S():this.dropkickjs=S(),B=B.exports;var T;T=class extends Dropkick{constructor(e,t){super(e,t),this.announceChanges=!1}setup(){this.announceChanges&&this.sel.addEventListener("change",()=>{this.controller.updateUserData("status",this.value)})}},r.autoDiscover=!1;const M=t.assets.BLANK_PIXEL;var L=class extends D{constructor(e,t){super(e,t)}setup(){super.setup(),this.editBtns=this.el.querySelectorAll(".profile__edit"),this.statusDropdown=this.el.querySelector(".profile__status"),this.el.addEventListener("click",e=>{if(e.preventDefault(),e.target.classList.contains("profile__edit")){let t=e.target.parentNode.querySelector("input");this.editField(e.target,t)}})}setupDropzone(){this.el.querySelector("#profileAvatar")&&(this.dropzone=new r("#profileAvatar",k),this.dropzone.options.autoProcessQueue=!0,this.dropzone.options.url="/upload",this.attachDropzoneListeners(),this.setAvatarToDropzone(this.dropzone.previewsContainer.dataset.src))}attachDropzoneListeners(){let e=this.profileName;this.dropzone.options.renameFile=(t=>`avatar_${e}_${(new Date).getTime()}${t.name.substring(t.name.lastIndexOf("."))}`),this.dropzone.on("success",e=>{this.controller.updateUserData("user_avatar",e.upload.filename)}),this.dropzone.on("error",(e,t,n)=>{if(n)switch(n.status){case 409:case 422:this.el.querySelector(".dropzone__message--error").textContent=t;break;default:this.el.querySelector(".dropzone__message--error").textContent="Server error, please reload page and try again"}})}setupSelect(){document.querySelector("#user_status")&&(this.select=new T("#user_status"),this.select.announceChanges=!0,this.select.controller=this.controller,this.select.setup())}setContent(e){super.setContent(e),this.profileName=this.el.querySelector(".profile__name").value,this.setupSelect(),this.setupDropzone()}setAvatarToDropzone(e){if(e!==M){let t={name:"mockfile",accepted:!0};this.dropzone.files.push(t),this.dropzone.emit("addedfile",t),this.dropzone.emit("thumbnail",t,e)}}editField(e,t){t.disabled=!1,t.focus(),e.style.display="none",t.addEventListener("blur",()=>this.lockField(e,t),{once:!0})}lockField(e,t){t.disabled=!0,e.style.display="block",this.sendData(t)}sendData(e){let t=e.getAttribute("name"),n=e.value;localStorage.setItem(t,n),this.controller.updateUserData(t,n)}},N=class{constructor(e,t){this.el=e,this.itemName=t}setup(){this.itemsContainer=this.el.querySelector(".list__items"),this.btnAdd=this.el.querySelector(".list__add"),this.isActive=this.itemsContainer.querySelector(".list__item--active"),this.btnAdd&&this.btnAdd.addEventListener("click",()=>this.createItem()),this.itemsContainer.addEventListener("click",e=>{e.stopPropagation(),this.controller.resolveListItemClick(e.target)})}update(e){this.itemsContainer.innerHTML=e,this.setActive(this.itemsContainer.querySelector(".list__item--active"))}createItem(){this.controller.createItem(this.itemName)}findItem(e){return this.itemsContainer.querySelector(`[data-${this.itemName}="${e}"]`)}setActiveItem(e){let t=this.itemsContainer.querySelector(`[data-${this.itemName}="${e}"]`);this.resetActiveItem(),this.setActive(t)}resetActiveItem(){this.isActive&&this.isActive.classList.remove("list__item--active"),this.isActive=null}setActive(e){e&&(e.classList.add("list__item--active"),this.isActive=e)}incrementUpdates(e){let t=this.findItem(e);t.dataset.updates=parseInt(t.dataset.updates)+1}resetUpdates(e){this.findItem(e)&&(this.findItem(e).dataset.updates=0)}},z={exports:{}};(function(e){(function(){var t,n,i,s,a,r,o,u,l,c,h,d,p,f,m,g,v,b,y,A,C,x;!function(t){var n="object"==typeof e?e:"object"==typeof self?self:"object"==typeof this?this:{};function i(e,t){return e!==n&&("function"==typeof Object.create?Object.defineProperty(e,"__esModule",{value:!0}):e.__esModule=!0),function(n,i){return e[n]=t?t(n,i):i}}"function"==typeof define&&define.amd?define("tslib",["exports"],function(e){t(i(n,i(e)))}):"object"==typeof z.exports?t(i(n,i(z.exports))):t(i(n))}(function(e){var k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};t=function(e,t){function n(){this.constructor=e}k(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]])}return n},s=function(e,t,n,i){var s,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(r=(a<3?s(r):a>3?s(t,n,r):s(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},a=function(e,t){return function(n,i){t(n,i,e)}},r=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=function(e,t,n,i){return new(n||(n=Promise))(function(s,a){function r(e){try{u(i.next(e))}catch(t){a(t)}}function o(e){try{u(i.throw(e))}catch(t){a(t)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,o)}u((i=i.apply(e,t||[])).next())})},u=function(e,t){var n,i,s,a,r={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=2&a[0]?i.return:a[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,a[1])).done)return s;switch(i=0,s&&(a=[2&a[0],s.value]),a[0]){case 0:case 1:s=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,i=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(s=(s=r.trys).length>0&&s[s.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!s||a[1]>s[0]&&a[1]<s[3])){r.label=a[1];break}if(6===a[0]&&r.label<s[1]){r.label=s[1],s=a;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(a);break}s[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(o){a=[6,o],i=0}finally{n=s=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}},l=function(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])},c=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},h=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,s,a=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)r.push(i.value)}catch(o){s={error:o}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(s)throw s.error}}return r},d=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e},p=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),s=0;for(t=0;t<n;t++)for(var a=arguments[t],r=0,o=a.length;r<o;r++,s++)i[s]=a[r];return i},f=function(e){return this instanceof f?(this.v=e,this):new f(e)},m=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,s=n.apply(e,t||[]),a=[];return i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i;function r(e){s[e]&&(i[e]=function(t){return new Promise(function(n,i){a.push([e,t,n,i])>1||o(e,t)})})}function o(e,t){try{(n=s[e](t)).value instanceof f?Promise.resolve(n.value.v).then(u,l):c(a[0][2],n)}catch(i){c(a[0][3],i)}var n}function u(e){o("next",e)}function l(e){o("throw",e)}function c(e,t){e(t),a.shift(),a.length&&o(a[0][0],a[0][1])}},g=function(e){var t,n;return t={},i("next"),i("throw",function(e){throw e}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(i,s){t[i]=e[i]?function(t){return(n=!n)?{value:f(e[i](t)),done:"return"===i}:s?s(t):t}:s}},v=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=c(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise(function(i,s){!function(e,t,n,i){Promise.resolve(i).then(function(t){e({value:t,done:n})},t)}(i,s,(t=e[n](t)).done,t.value)})}}},b=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},y=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},A=function(e){return e&&e.__esModule?e:{default:e}},C=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},x=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},e("__extends",t),e("__assign",n),e("__rest",i),e("__decorate",s),e("__param",a),e("__metadata",r),e("__awaiter",o),e("__generator",u),e("__exportStar",l),e("__values",c),e("__read",h),e("__spread",d),e("__spreadArrays",p),e("__await",f),e("__asyncGenerator",m),e("__asyncDelegator",g),e("__asyncValues",v),e("__makeTemplateObject",b),e("__importStar",y),e("__importDefault",A),e("__classPrivateFieldGet",C),e("__classPrivateFieldSet",x)})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),z=z.exports;var O={};Object.defineProperty(O,"__esModule",{value:!0}),O.defaults=function(e,t){for(var n in t)t.hasOwnProperty(n)&&void 0===e[n]&&(e[n]=t[n]);return e},O.ellipsis=function(e,t,n){var i;return e.length>t&&(null==n?(n="&hellip;",i=3):i=n.length,e=e.substring(0,t-i)+n),e},O.indexOf=function(e,t){if(Array.prototype.indexOf)return e.indexOf(t);for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},O.remove=function(e,t){for(var n=e.length-1;n>=0;n--)!0===t(e[n])&&e.splice(n,1)},O.splitAndCapture=function(e,t){if(!t.global)throw new Error("`splitRegex` must have the 'g' flag set");for(var n,i=[],s=0;n=t.exec(e);)i.push(e.substring(s,n.index)),i.push(n[0]),s=n.index+n[0].length;return i.push(e.substring(s)),i},O.throwUnhandledCaseError=function(e){throw new Error("Unhandled case for value: '"+e+"'")};var P={};Object.defineProperty(P,"__esModule",{value:!0});var R=function(){function e(e){void 0===e&&(e={}),this.tagName="",this.attrs={},this.innerHTML="",this.whitespaceRegex=/\s+/,this.tagName=e.tagName||"",this.attrs=e.attrs||{},this.innerHTML=e.innerHtml||e.innerHTML||""}return e.prototype.setTagName=function(e){return this.tagName=e,this},e.prototype.getTagName=function(){return this.tagName||""},e.prototype.setAttr=function(e,t){return this.getAttrs()[e]=t,this},e.prototype.getAttr=function(e){return this.getAttrs()[e]},e.prototype.setAttrs=function(e){return Object.assign(this.getAttrs(),e),this},e.prototype.getAttrs=function(){return this.attrs||(this.attrs={})},e.prototype.setClass=function(e){return this.setAttr("class",e)},e.prototype.addClass=function(e){for(var t,n=this.getClass(),i=this.whitespaceRegex,s=n?n.split(i):[],a=e.split(i);t=a.shift();)-1===O.indexOf(s,t)&&s.push(t);return this.getAttrs().class=s.join(" "),this},e.prototype.removeClass=function(e){for(var t,n=this.getClass(),i=this.whitespaceRegex,s=n?n.split(i):[],a=e.split(i);s.length&&(t=a.shift());){var r=O.indexOf(s,t);-1!==r&&s.splice(r,1)}return this.getAttrs().class=s.join(" "),this},e.prototype.getClass=function(){return this.getAttrs().class||""},e.prototype.hasClass=function(e){return-1!==(" "+this.getClass()+" ").indexOf(" "+e+" ")},e.prototype.setInnerHTML=function(e){return this.innerHTML=e,this},e.prototype.setInnerHtml=function(e){return this.setInnerHTML(e)},e.prototype.getInnerHTML=function(){return this.innerHTML||""},e.prototype.getInnerHtml=function(){return this.getInnerHTML()},e.prototype.toAnchorString=function(){var e=this.getTagName(),t=this.buildAttrsStr();return["<",e,t=t?" "+t:"",">",this.getInnerHtml(),"</",e,">"].join("")},e.prototype.buildAttrsStr=function(){if(!this.attrs)return"";var e=this.getAttrs(),t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n+'="'+e[n]+'"');return t.join(" ")},e}();P.HtmlTag=R;var U={};Object.defineProperty(U,"__esModule",{value:!0}),U.truncateSmart=function(e,t,n){var i,s;null==n?(n="&hellip;",s=3,i=8):(s=n.length,i=n.length);var a=function(e){var t="";return e.scheme&&e.host&&(t+=e.scheme+"://"),e.host&&(t+=e.host),e.path&&(t+="/"+e.path),e.query&&(t+="?"+e.query),e.fragment&&(t+="#"+e.fragment),t},r=function(e,t){var i=t/2,s=Math.ceil(i),a=-1*Math.floor(i),r="";return a<0&&(r=e.substr(a)),e.substr(0,s)+n+r};if(e.length<=t)return e;var o=t-s,u=function(e){var t={},n=e,i=n.match(/^([a-z]+):\/\//i);return i&&(t.scheme=i[1],n=n.substr(i[0].length)),(i=n.match(/^(.*?)(?=(\?|#|\/|$))/i))&&(t.host=i[1],n=n.substr(i[0].length)),(i=n.match(/^\/(.*?)(?=(\?|#|$))/i))&&(t.path=i[1],n=n.substr(i[0].length)),(i=n.match(/^\?(.*?)(?=(#|$))/i))&&(t.query=i[1],n=n.substr(i[0].length)),(i=n.match(/^#(.*?)$/i))&&(t.fragment=i[1]),t}(e);if(u.query){var l=u.query.match(/^(.*?)(?=(\?|\#))(.*?)$/i);l&&(u.query=u.query.substr(0,l[1].length),e=a(u))}if(e.length<=t)return e;if(u.host&&(u.host=u.host.replace(/^www\./,""),e=a(u)),e.length<=t)return e;var c="";if(u.host&&(c+=u.host),c.length>=o)return u.host.length==t?(u.host.substr(0,t-s)+n).substr(0,o+i):r(c,o).substr(0,o+i);var h="";if(u.path&&(h+="/"+u.path),u.query&&(h+="?"+u.query),h){if((c+h).length>=o)return(c+h).length==t?(c+h).substr(0,t):(c+r(h,o-c.length)).substr(0,o+i);c+=h}if(u.fragment){var d="#"+u.fragment;if((c+d).length>=o)return(c+d).length==t?(c+d).substr(0,t):(c+r(d,o-c.length)).substr(0,o+i);c+=d}if(u.scheme&&u.host){var p=u.scheme+"://";if((c+p).length<o)return(p+c).substr(0,t)}if(c.length<=t)return c;var f="";return o>0&&(f=c.substr(-1*Math.floor(o/2))),(c.substr(0,Math.ceil(o/2))+n+f).substr(0,o+i)};var j={};Object.defineProperty(j,"__esModule",{value:!0}),j.truncateMiddle=function(e,t,n){if(e.length<=t)return e;var i,s;null==n?(n="&hellip;",i=8,s=3):(i=n.length,s=n.length);var a=t-s,r="";return a>0&&(r=e.substr(-1*Math.floor(a/2))),(e.substr(0,Math.ceil(a/2))+n+r).substr(0,a+i)};var I={};Object.defineProperty(I,"__esModule",{value:!0}),I.truncateEnd=function(e,t,n){return O.ellipsis(e,t,n)};var q={};Object.defineProperty(q,"__esModule",{value:!0});var H=function(){function e(e){void 0===e&&(e={}),this.newWindow=!1,this.truncate={},this.className="",this.newWindow=e.newWindow||!1,this.truncate=e.truncate||{},this.className=e.className||""}return e.prototype.build=function(e){return new P.HtmlTag({tagName:"a",attrs:this.createAttrs(e),innerHtml:this.processAnchorText(e.getAnchorText())})},e.prototype.createAttrs=function(e){var t={href:e.getAnchorHref()},n=this.createCssClass(e);return n&&(t.class=n),this.newWindow&&(t.target="_blank",t.rel="noopener noreferrer"),this.truncate&&this.truncate.length&&this.truncate.length<e.getAnchorText().length&&(t.title=e.getAnchorHref()),t},e.prototype.createCssClass=function(e){var t=this.className;if(t){for(var n=[t],i=e.getCssClassSuffixes(),s=0,a=i.length;s<a;s++)n.push(t+"-"+i[s]);return n.join(" ")}return""},e.prototype.processAnchorText=function(e){return this.doTruncate(e)},e.prototype.doTruncate=function(e){var t=this.truncate;if(!t||!t.length)return e;var n=t.length,i=t.location;return"smart"===i?U.truncateSmart(e,n):"middle"===i?j.truncateMiddle(e,n):I.truncateEnd(e,n)},e}();q.AnchorTagBuilder=H;var W={};Object.defineProperty(W,"__esModule",{value:!0});var Q=function(){function e(e){this.__jsduckDummyDocProp=null,this.matchedText="",this.offset=0,this.tagBuilder=e.tagBuilder,this.matchedText=e.matchedText,this.offset=e.offset}return e.prototype.getMatchedText=function(){return this.matchedText},e.prototype.setOffset=function(e){this.offset=e},e.prototype.getOffset=function(){return this.offset},e.prototype.getCssClassSuffixes=function(){return[this.getType()]},e.prototype.buildTag=function(){return this.tagBuilder.build(this)},e}();W.Match=Q;var $={};Object.defineProperty($,"__esModule",{value:!0});var G=function(e){function t(t){var n=e.call(this,t)||this;return n.email="",n.email=t.email,n}return z.__extends(t,e),t.prototype.getType=function(){return"email"},t.prototype.getEmail=function(){return this.email},t.prototype.getAnchorHref=function(){return"mailto:"+this.email},t.prototype.getAnchorText=function(){return this.email},t}(W.Match);$.EmailMatch=G;var Y={};Object.defineProperty(Y,"__esModule",{value:!0});var V=function(e){function t(t){var n=e.call(this,t)||this;return n.serviceName="",n.hashtag="",n.serviceName=t.serviceName,n.hashtag=t.hashtag,n}return z.__extends(t,e),t.prototype.getType=function(){return"hashtag"},t.prototype.getServiceName=function(){return this.serviceName},t.prototype.getHashtag=function(){return this.hashtag},t.prototype.getAnchorHref=function(){var e=this.serviceName,t=this.hashtag;switch(e){case"twitter":return"https://twitter.com/hashtag/"+t;case"facebook":return"https://www.facebook.com/hashtag/"+t;case"instagram":return"https://instagram.com/explore/tags/"+t;default:throw new Error("Unknown service name to point hashtag to: "+e)}},t.prototype.getAnchorText=function(){return"#"+this.hashtag},t}(W.Match);Y.HashtagMatch=V;var X={};Object.defineProperty(X,"__esModule",{value:!0});var K=function(e){function t(t){var n=e.call(this,t)||this;return n.serviceName="twitter",n.mention="",n.mention=t.mention,n.serviceName=t.serviceName,n}return z.__extends(t,e),t.prototype.getType=function(){return"mention"},t.prototype.getMention=function(){return this.mention},t.prototype.getServiceName=function(){return this.serviceName},t.prototype.getAnchorHref=function(){switch(this.serviceName){case"twitter":return"https://twitter.com/"+this.mention;case"instagram":return"https://instagram.com/"+this.mention;case"soundcloud":return"https://soundcloud.com/"+this.mention;default:throw new Error("Unknown service name to point mention to: "+this.serviceName)}},t.prototype.getAnchorText=function(){return"@"+this.mention},t.prototype.getCssClassSuffixes=function(){var t=e.prototype.getCssClassSuffixes.call(this),n=this.getServiceName();return n&&t.push(n),t},t}(W.Match);X.MentionMatch=K;var Z={};Object.defineProperty(Z,"__esModule",{value:!0});var J=function(e){function t(t){var n=e.call(this,t)||this;return n.number="",n.plusSign=!1,n.number=t.number,n.plusSign=t.plusSign,n}return z.__extends(t,e),t.prototype.getType=function(){return"phone"},t.prototype.getPhoneNumber=function(){return this.number},t.prototype.getNumber=function(){return this.getPhoneNumber()},t.prototype.getAnchorHref=function(){return"tel:"+(this.plusSign?"+":"")+this.number},t.prototype.getAnchorText=function(){return this.matchedText},t}(W.Match);Z.PhoneMatch=J;var ee={};Object.defineProperty(ee,"__esModule",{value:!0});var te=function(e){function t(t){var n=e.call(this,t)||this;return n.url="",n.urlMatchType="scheme",n.protocolUrlMatch=!1,n.protocolRelativeMatch=!1,n.stripPrefix={scheme:!0,www:!0},n.stripTrailingSlash=!0,n.decodePercentEncoding=!0,n.schemePrefixRegex=/^(https?:\/\/)?/i,n.wwwPrefixRegex=/^(https?:\/\/)?(www\.)?/i,n.protocolRelativeRegex=/^\/\//,n.protocolPrepended=!1,n.urlMatchType=t.urlMatchType,n.url=t.url,n.protocolUrlMatch=t.protocolUrlMatch,n.protocolRelativeMatch=t.protocolRelativeMatch,n.stripPrefix=t.stripPrefix,n.stripTrailingSlash=t.stripTrailingSlash,n.decodePercentEncoding=t.decodePercentEncoding,n}return z.__extends(t,e),t.prototype.getType=function(){return"url"},t.prototype.getUrlMatchType=function(){return this.urlMatchType},t.prototype.getUrl=function(){var e=this.url;return this.protocolRelativeMatch||this.protocolUrlMatch||this.protocolPrepended||(e=this.url="http://"+e,this.protocolPrepended=!0),e},t.prototype.getAnchorHref=function(){return this.getUrl().replace(/&amp;/g,"&")},t.prototype.getAnchorText=function(){var e=this.getMatchedText();return this.protocolRelativeMatch&&(e=this.stripProtocolRelativePrefix(e)),this.stripPrefix.scheme&&(e=this.stripSchemePrefix(e)),this.stripPrefix.www&&(e=this.stripWwwPrefix(e)),this.stripTrailingSlash&&(e=this.removeTrailingSlash(e)),this.decodePercentEncoding&&(e=this.removePercentEncoding(e)),e},t.prototype.stripSchemePrefix=function(e){return e.replace(this.schemePrefixRegex,"")},t.prototype.stripWwwPrefix=function(e){return e.replace(this.wwwPrefixRegex,"$1")},t.prototype.stripProtocolRelativePrefix=function(e){return e.replace(this.protocolRelativeRegex,"")},t.prototype.removeTrailingSlash=function(e){return"/"===e.charAt(e.length-1)&&(e=e.slice(0,-1)),e},t.prototype.removePercentEncoding=function(e){var t=e.replace(/%22/gi,"&quot;").replace(/%26/gi,"&amp;").replace(/%27/gi,"&#39;").replace(/%3C/gi,"&lt;").replace(/%3E/gi,"&gt;");try{return decodeURIComponent(t)}catch(n){return t}},t}(W.Match);ee.UrlMatch=te;var ne={};Object.defineProperty(ne,"__esModule",{value:!0});var ie=function(e){this.__jsduckDummyDocProp=null,this.tagBuilder=e.tagBuilder};ne.Matcher=ie;var se={};Object.defineProperty(se,"__esModule",{value:!0}),se.letterRe=/[A-Za-z]/,se.digitRe=/[\d]/,se.nonDigitRe=/[\D]/,se.whitespaceRe=/\s/,se.quoteRe=/['"]/,se.controlCharsRe=/[\x00-\x1F\x7F]/,se.alphaCharsStr=/A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC/.source,se.emojiStr=/\u2700-\u27bf\udde6-\uddff\ud800-\udbff\udc00-\udfff\ufe0e\ufe0f\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0\ud83c\udffb-\udfff\u200d\u3299\u3297\u303d\u3030\u24c2\ud83c\udd70-\udd71\udd7e-\udd7f\udd8e\udd91-\udd9a\udde6-\uddff\ude01-\ude02\ude1a\ude2f\ude32-\ude3a\ude50-\ude51\u203c\u2049\u25aa-\u25ab\u25b6\u25c0\u25fb-\u25fe\u00a9\u00ae\u2122\u2139\udc04\u2600-\u26FF\u2b05\u2b06\u2b07\u2b1b\u2b1c\u2b50\u2b55\u231a\u231b\u2328\u23cf\u23e9-\u23f3\u23f8-\u23fa\udccf\u2935\u2934\u2190-\u21ff/.source,se.marksStr=/\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D4-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C03\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D01-\u0D03\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF5\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F/.source,se.alphaCharsAndMarksStr=se.alphaCharsStr+se.emojiStr+se.marksStr,se.decimalNumbersStr=/0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19/.source,se.alphaNumericCharsStr=se.alphaCharsAndMarksStr+se.decimalNumbersStr,se.alphaNumericAndMarksCharsStr=se.alphaCharsAndMarksStr+se.decimalNumbersStr;var ae="(?:["+se.decimalNumbersStr+"]{1,3}\\.){3}["+se.decimalNumbersStr+"]{1,3}",re="["+se.alphaNumericAndMarksCharsStr+"](?:["+se.alphaNumericAndMarksCharsStr+"\\-]{0,61}["+se.alphaNumericAndMarksCharsStr+"])?",oe=function(e){return"(?=("+re+"))\\"+e};se.getDomainNameStr=function(e){return"(?:"+oe(e)+"(?:\\."+oe(e+1)+"){0,126}|"+ae+")"},new RegExp("["+se.alphaNumericAndMarksCharsStr+".\\-]*["+se.alphaNumericAndMarksCharsStr+"\\-]"),se.domainNameCharRegex=new RegExp("["+se.alphaNumericAndMarksCharsStr+"]");var ue={};Object.defineProperty(ue,"__esModule",{value:!0}),ue.tldRegex=/(?:xn--vermgensberatung-pwb|xn--vermgensberater-ctb|xn--clchc0ea0b2g2a9gcd|xn--w4r85el8fhu5dnra|northwesternmutual|travelersinsurance|verm\xf6gensberatung|xn--3oq18vl8pn36a|xn--5su34j936bgsg|xn--bck1b9a5dre4c|xn--mgbai9azgqp6j|xn--mgberp4a5d4ar|xn--xkc2dl3a5ee0h|verm\xf6gensberater|xn--fzys8d69uvgm|xn--mgba7c0bbn0a|xn--xkc2al3hye2a|americanexpress|kerryproperties|sandvikcoromant|xn--i1b6b1a6a2e|xn--kcrx77d1x4a|xn--lgbbat1ad8j|xn--mgba3a4f16a|xn--mgbaakc7dvf|xn--mgbc0a9azcg|xn--nqv7fs00ema|afamilycompany|americanfamily|bananarepublic|cancerresearch|cookingchannel|kerrylogistics|weatherchannel|xn--54b7fta0cc|xn--6qq986b3xl|xn--80aqecdr1a|xn--b4w605ferd|xn--fiq228c5hs|xn--h2breg3eve|xn--jlq61u9w7b|xn--mgba3a3ejt|xn--mgbaam7a8h|xn--mgbayh7gpa|xn--mgbb9fbpob|xn--mgbbh1a71e|xn--mgbca7dzdo|xn--mgbi4ecexp|xn--mgbx4cd0ab|xn--rvc1e0am3e|international|lifeinsurance|spreadbetting|travelchannel|wolterskluwer|xn--eckvdtc9d|xn--fpcrj9c3d|xn--fzc2c9e2c|xn--h2brj9c8c|xn--tiq49xqyj|xn--yfro4i67o|xn--ygbi2ammx|construction|lplfinancial|scholarships|versicherung|xn--3e0b707e|xn--45br5cyl|xn--80adxhks|xn--80asehdb|xn--8y0a063a|xn--gckr3f0f|xn--mgb9awbf|xn--mgbab2bd|xn--mgbgu82a|xn--mgbpl2fh|xn--mgbt3dhd|xn--mk1bu44c|xn--ngbc5azd|xn--ngbe9e0a|xn--ogbpf8fl|xn--qcka1pmc|accountants|barclaycard|blackfriday|blockbuster|bridgestone|calvinklein|contractors|creditunion|engineering|enterprises|foodnetwork|investments|kerryhotels|lamborghini|motorcycles|olayangroup|photography|playstation|productions|progressive|redumbrella|rightathome|williamhill|xn--11b4c3d|xn--1ck2e1b|xn--1qqw23a|xn--2scrj9c|xn--3bst00m|xn--3ds443g|xn--3hcrj9c|xn--42c2d9a|xn--45brj9c|xn--55qw42g|xn--6frz82g|xn--80ao21a|xn--9krt00a|xn--cck2b3b|xn--czr694b|xn--d1acj3b|xn--efvy88h|xn--estv75g|xn--fct429k|xn--fjq720a|xn--flw351e|xn--g2xx48c|xn--gecrj9c|xn--gk3at1e|xn--h2brj9c|xn--hxt814e|xn--imr513n|xn--j6w193g|xn--jvr189m|xn--kprw13d|xn--kpry57d|xn--kpu716f|xn--mgbbh1a|xn--mgbtx2b|xn--mix891f|xn--nyqy26a|xn--otu796d|xn--pbt977c|xn--pgbs0dh|xn--q9jyb4c|xn--rhqv96g|xn--rovu88b|xn--s9brj9c|xn--ses554g|xn--t60b56a|xn--vuq861b|xn--w4rs40l|xn--xhq521b|xn--zfr164b|\u0b9a\u0bbf\u0b99\u0bcd\u0b95\u0baa\u0bcd\u0baa\u0bc2\u0bb0\u0bcd|accountant|apartments|associates|basketball|bnpparibas|boehringer|capitalone|consulting|creditcard|cuisinella|eurovision|extraspace|foundation|healthcare|immobilien|industries|management|mitsubishi|nationwide|newholland|nextdirect|onyourside|properties|protection|prudential|realestate|republican|restaurant|schaeffler|swiftcover|tatamotors|technology|telefonica|university|vistaprint|vlaanderen|volkswagen|xn--30rr7y|xn--3pxu8k|xn--45q11c|xn--4gbrim|xn--55qx5d|xn--5tzm5g|xn--80aswg|xn--90a3ac|xn--9dbq2a|xn--9et52u|xn--c2br7g|xn--cg4bki|xn--czrs0t|xn--czru2d|xn--fiq64b|xn--fiqs8s|xn--fiqz9s|xn--io0a7i|xn--kput3i|xn--mxtq1m|xn--o3cw4h|xn--pssy2u|xn--unup4y|xn--wgbh1c|xn--wgbl6a|xn--y9a3aq|accenture|alfaromeo|allfinanz|amsterdam|analytics|aquarelle|barcelona|bloomberg|christmas|community|directory|education|equipment|fairwinds|financial|firestone|fresenius|frontdoor|fujixerox|furniture|goldpoint|hisamitsu|homedepot|homegoods|homesense|honeywell|institute|insurance|kuokgroup|ladbrokes|lancaster|landrover|lifestyle|marketing|marshalls|melbourne|microsoft|panasonic|passagens|pramerica|richardli|scjohnson|shangrila|solutions|statebank|statefarm|stockholm|travelers|vacations|xn--90ais|xn--c1avg|xn--d1alf|xn--e1a4c|xn--fhbei|xn--j1aef|xn--j1amh|xn--l1acc|xn--ngbrx|xn--nqv7f|xn--p1acf|xn--tckwe|xn--vhquv|yodobashi|abudhabi|airforce|allstate|attorney|barclays|barefoot|bargains|baseball|boutique|bradesco|broadway|brussels|budapest|builders|business|capetown|catering|catholic|chrysler|cipriani|cityeats|cleaning|clinique|clothing|commbank|computer|delivery|deloitte|democrat|diamonds|discount|discover|download|engineer|ericsson|esurance|etisalat|everbank|exchange|feedback|fidelity|firmdale|football|frontier|goodyear|grainger|graphics|guardian|hdfcbank|helsinki|holdings|hospital|infiniti|ipiranga|istanbul|jpmorgan|lighting|lundbeck|marriott|maserati|mckinsey|memorial|merckmsd|mortgage|movistar|observer|partners|pharmacy|pictures|plumbing|property|redstone|reliance|saarland|samsclub|security|services|shopping|showtime|softbank|software|stcgroup|supplies|symantec|training|uconnect|vanguard|ventures|verisign|woodside|xn--90ae|xn--node|xn--p1ai|xn--qxam|yokohama|\u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629|abogado|academy|agakhan|alibaba|android|athleta|auction|audible|auspost|avianca|banamex|bauhaus|bentley|bestbuy|booking|brother|bugatti|capital|caravan|careers|cartier|channel|charity|chintai|citadel|clubmed|college|cologne|comcast|company|compare|contact|cooking|corsica|country|coupons|courses|cricket|cruises|dentist|digital|domains|exposed|express|farmers|fashion|ferrari|ferrero|finance|fishing|fitness|flights|florist|flowers|forsale|frogans|fujitsu|gallery|genting|godaddy|grocery|guitars|hamburg|hangout|hitachi|holiday|hosting|hoteles|hotmail|hyundai|iselect|ismaili|jewelry|juniper|kitchen|komatsu|lacaixa|lancome|lanxess|lasalle|latrobe|leclerc|liaison|limited|lincoln|markets|metlife|monster|netbank|netflix|network|neustar|okinawa|oldnavy|organic|origins|philips|pioneer|politie|realtor|recipes|rentals|reviews|rexroth|samsung|sandvik|schmidt|schwarz|science|shiksha|shriram|singles|staples|starhub|storage|support|surgery|systems|temasek|theater|theatre|tickets|tiffany|toshiba|trading|walmart|wanggou|watches|weather|website|wedding|whoswho|windows|winners|xfinity|yamaxun|youtube|zuerich|\u043a\u0430\u0442\u043e\u043b\u0438\u043a|\u0627\u062a\u0635\u0627\u0644\u0627\u062a|\u0627\u0644\u062c\u0632\u0627\u0626\u0631|\u0627\u0644\u0639\u0644\u064a\u0627\u0646|\u067e\u0627\u06a9\u0633\u062a\u0627\u0646|\u0643\u0627\u062b\u0648\u0644\u064a\u0643|\u0645\u0648\u0628\u0627\u064a\u0644\u064a|\u0b87\u0ba8\u0bcd\u0ba4\u0bbf\u0baf\u0bbe|abarth|abbott|abbvie|active|africa|agency|airbus|airtel|alipay|alsace|alstom|anquan|aramco|author|bayern|beauty|berlin|bharti|blanco|bostik|boston|broker|camera|career|caseih|casino|center|chanel|chrome|church|circle|claims|clinic|coffee|comsec|condos|coupon|credit|cruise|dating|datsun|dealer|degree|dental|design|direct|doctor|dunlop|dupont|durban|emerck|energy|estate|events|expert|family|flickr|futbol|gallup|garden|george|giving|global|google|gratis|health|hermes|hiphop|hockey|hotels|hughes|imamat|insure|intuit|jaguar|joburg|juegos|kaufen|kinder|kindle|kosher|lancia|latino|lawyer|lefrak|living|locker|london|luxury|madrid|maison|makeup|market|mattel|mobile|mobily|monash|mormon|moscow|museum|mutual|nagoya|natura|nissan|nissay|norton|nowruz|office|olayan|online|oracle|orange|otsuka|pfizer|photos|physio|piaget|pictet|quebec|racing|realty|reisen|repair|report|review|rocher|rogers|ryukyu|safety|sakura|sanofi|school|schule|search|secure|select|shouji|soccer|social|stream|studio|supply|suzuki|swatch|sydney|taipei|taobao|target|tattoo|tennis|tienda|tjmaxx|tkmaxx|toyota|travel|unicom|viajes|viking|villas|virgin|vision|voting|voyage|vuelos|walter|warman|webcam|xihuan|yachts|yandex|zappos|\u043c\u043e\u0441\u043a\u0432\u0430|\u043e\u043d\u043b\u0430\u0439\u043d|\u0627\u0628\u0648\u0638\u0628\u064a|\u0627\u0631\u0627\u0645\u0643\u0648|\u0627\u0644\u0627\u0631\u062f\u0646|\u0627\u0644\u0645\u063a\u0631\u0628|\u0627\u0645\u0627\u0631\u0627\u062a|\u0641\u0644\u0633\u0637\u064a\u0646|\u0645\u0644\u064a\u0633\u064a\u0627|\u092d\u093e\u0930\u0924\u092e\u094d|\u0b87\u0bb2\u0b99\u0bcd\u0b95\u0bc8|\u30d5\u30a1\u30c3\u30b7\u30e7\u30f3|actor|adult|aetna|amfam|amica|apple|archi|audio|autos|azure|baidu|beats|bible|bingo|black|boats|bosch|build|canon|cards|chase|cheap|cisco|citic|click|cloud|coach|codes|crown|cymru|dabur|dance|deals|delta|dodge|drive|dubai|earth|edeka|email|epost|epson|faith|fedex|final|forex|forum|gallo|games|gifts|gives|glade|glass|globo|gmail|green|gripe|group|gucci|guide|homes|honda|horse|house|hyatt|ikano|intel|irish|iveco|jetzt|koeln|kyoto|lamer|lease|legal|lexus|lilly|linde|lipsy|lixil|loans|locus|lotte|lotto|lupin|macys|mango|media|miami|money|mopar|movie|nadex|nexus|nikon|ninja|nokia|nowtv|omega|osaka|paris|parts|party|phone|photo|pizza|place|poker|praxi|press|prime|promo|quest|radio|rehab|reise|ricoh|rocks|rodeo|rugby|salon|sener|seven|sharp|shell|shoes|skype|sling|smart|smile|solar|space|sport|stada|store|study|style|sucks|swiss|tatar|tires|tirol|tmall|today|tokyo|tools|toray|total|tours|trade|trust|tunes|tushu|ubank|vegas|video|vodka|volvo|wales|watch|weber|weibo|works|world|xerox|yahoo|zippo|\u0627\u06cc\u0631\u0627\u0646|\u0628\u0627\u0632\u0627\u0631|\u0628\u06be\u0627\u0631\u062a|\u0633\u0648\u062f\u0627\u0646|\u0633\u0648\u0631\u064a\u0629|\u0647\u0645\u0631\u0627\u0647|\u092d\u093e\u0930\u094b\u0924|\u0938\u0902\u0917\u0920\u0928|\u09ac\u09be\u0982\u09b2\u09be|\u0c2d\u0c3e\u0c30\u0c24\u0c4d|\u0d2d\u0d3e\u0d30\u0d24\u0d02|\u5609\u91cc\u5927\u9152\u5e97|aarp|able|adac|aero|aigo|akdn|ally|amex|arab|army|arpa|arte|asda|asia|audi|auto|baby|band|bank|bbva|beer|best|bike|bing|blog|blue|bofa|bond|book|buzz|cafe|call|camp|care|cars|casa|case|cash|cbre|cern|chat|citi|city|club|cool|coop|cyou|data|date|dclk|deal|dell|desi|diet|dish|docs|doha|duck|duns|dvag|erni|fage|fail|fans|farm|fast|fiat|fido|film|fire|fish|flir|food|ford|free|fund|game|gbiz|gent|ggee|gift|gmbh|gold|golf|goog|guge|guru|hair|haus|hdfc|help|here|hgtv|host|hsbc|icbc|ieee|imdb|immo|info|itau|java|jeep|jobs|jprs|kddi|kiwi|kpmg|kred|land|lego|lgbt|lidl|life|like|limo|link|live|loan|loft|love|ltda|luxe|maif|meet|meme|menu|mini|mint|mobi|moda|moto|name|navy|news|next|nico|nike|ollo|open|page|pars|pccw|pics|ping|pink|play|plus|pohl|porn|post|prod|prof|qpon|raid|read|reit|rent|rest|rich|rmit|room|rsvp|ruhr|safe|sale|sarl|save|saxo|scor|scot|seat|seek|sexy|shaw|shia|shop|show|silk|sina|site|skin|sncf|sohu|song|sony|spot|star|surf|talk|taxi|team|tech|teva|tiaa|tips|town|toys|tube|vana|visa|viva|vivo|vote|voto|wang|weir|wien|wiki|wine|work|xbox|yoga|zara|zero|zone|\u0434\u0435\u0442\u0438|\u0441\u0430\u0439\u0442|\u0628\u0627\u0631\u062a|\u0628\u064a\u062a\u0643|\u0680\u0627\u0631\u062a|\u062a\u0648\u0646\u0633|\u0634\u0628\u0643\u0629|\u0639\u0631\u0627\u0642|\u0639\u0645\u0627\u0646|\u0645\u0648\u0642\u0639|\u092d\u093e\u0930\u0924|\u09ad\u09be\u09b0\u09a4|\u09ad\u09be\u09f0\u09a4|\u0a2d\u0a3e\u0a30\u0a24|\u0aad\u0abe\u0ab0\u0aa4|\u0b2d\u0b3e\u0b30\u0b24|\u0cad\u0cbe\u0cb0\u0ca4|\u0dbd\u0d82\u0d9a\u0dcf|\u30b0\u30fc\u30b0\u30eb|\u30af\u30e9\u30a6\u30c9|\u30dd\u30a4\u30f3\u30c8|\u5927\u4f17\u6c7d\u8f66|\u7ec4\u7ec7\u673a\u6784|\u96fb\u8a0a\u76c8\u79d1|\u9999\u683c\u91cc\u62c9|aaa|abb|abc|aco|ads|aeg|afl|aig|anz|aol|app|art|aws|axa|bar|bbc|bbt|bcg|bcn|bet|bid|bio|biz|bms|bmw|bnl|bom|boo|bot|box|buy|bzh|cab|cal|cam|car|cat|cba|cbn|cbs|ceb|ceo|cfa|cfd|com|crs|csc|dad|day|dds|dev|dhl|diy|dnp|dog|dot|dtv|dvr|eat|eco|edu|esq|eus|fan|fit|fly|foo|fox|frl|ftr|fun|fyi|gal|gap|gdn|gea|gle|gmo|gmx|goo|gop|got|gov|hbo|hiv|hkt|hot|how|ibm|ice|icu|ifm|inc|ing|ink|int|ist|itv|jcb|jcp|jio|jll|jmp|jnj|jot|joy|kfh|kia|kim|kpn|krd|lat|law|lds|llc|lol|lpl|ltd|man|map|mba|med|men|mil|mit|mlb|mls|mma|moe|moi|mom|mov|msd|mtn|mtr|nab|nba|nec|net|new|nfl|ngo|nhk|now|nra|nrw|ntt|nyc|obi|off|one|ong|onl|ooo|org|ott|ovh|pay|pet|phd|pid|pin|pnc|pro|pru|pub|pwc|qvc|red|ren|ril|rio|rip|run|rwe|sap|sas|sbi|sbs|sca|scb|ses|sew|sex|sfr|ski|sky|soy|srl|srt|stc|tab|tax|tci|tdk|tel|thd|tjx|top|trv|tui|tvs|ubs|uno|uol|ups|vet|vig|vin|vip|wed|win|wme|wow|wtc|wtf|xin|xxx|xyz|you|yun|zip|\u0431\u0435\u043b|\u043a\u043e\u043c|\u049b\u0430\u0437|\u043c\u043a\u0434|\u043c\u043e\u043d|\u043e\u0440\u0433|\u0440\u0443\u0441|\u0441\u0440\u0431|\u0443\u043a\u0440|\u0570\u0561\u0575|\u05e7\u05d5\u05dd|\u0639\u0631\u0628|\u0642\u0637\u0631|\u0643\u0648\u0645|\u0645\u0635\u0631|\u0915\u0949\u092e|\u0928\u0947\u091f|\u0e04\u0e2d\u0e21|\u0e44\u0e17\u0e22|\u30b9\u30c8\u30a2|\u30bb\u30fc\u30eb|\u307f\u3093\u306a|\u4e2d\u6587\u7f51|\u5929\u4e3b\u6559|\u6211\u7231\u4f60|\u65b0\u52a0\u5761|\u6de1\u9a6c\u9521|\u8bfa\u57fa\u4e9a|\u98de\u5229\u6d66|ac|ad|ae|af|ag|ai|al|am|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw|\u03b5\u03bb|\u0431\u0433|\u0435\u044e|\u0440\u0444|\u10d2\u10d4|\ub2f7\ub137|\ub2f7\ucef4|\uc0bc\uc131|\ud55c\uad6d|\u30b3\u30e0|\u4e16\u754c|\u4e2d\u4fe1|\u4e2d\u56fd|\u4e2d\u570b|\u4f01\u4e1a|\u4f5b\u5c71|\u4fe1\u606f|\u5065\u5eb7|\u516b\u5366|\u516c\u53f8|\u516c\u76ca|\u53f0\u6e7e|\u53f0\u7063|\u5546\u57ce|\u5546\u5e97|\u5546\u6807|\u5609\u91cc|\u5728\u7ebf|\u5927\u62ff|\u5a31\u4e50|\u5bb6\u96fb|\u5de5\u884c|\u5e7f\u4e1c|\u5fae\u535a|\u6148\u5584|\u624b\u673a|\u624b\u8868|\u62db\u8058|\u653f\u52a1|\u653f\u5e9c|\u65b0\u95fb|\u65f6\u5c1a|\u66f8\u7c4d|\u673a\u6784|\u6e38\u620f|\u6fb3\u9580|\u70b9\u770b|\u73e0\u5b9d|\u79fb\u52a8|\u7f51\u5740|\u7f51\u5e97|\u7f51\u7ad9|\u7f51\u7edc|\u8054\u901a|\u8c37\u6b4c|\u8d2d\u7269|\u901a\u8ca9|\u96c6\u56e2|\u98df\u54c1|\u9910\u5385|\u9999\u6e2f)/;var le={};Object.defineProperty(le,"__esModule",{value:!0});var ce=new RegExp("["+se.alphaNumericAndMarksCharsStr+"!#$%&'*+/=?^_`{|}~-]"),he=new RegExp("^"+ue.tldRegex.source+"$"),de=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.localPartCharRegex=ce,t.strictTldRegex=he,t}return z.__extends(t,e),t.prototype.parseMatches=function(e){for(var t=this.tagBuilder,n=this.localPartCharRegex,i=this.strictTldRegex,s=[],a=e.length,r=new pe,o={m:"a",a:"i",i:"l",l:"t",t:"o",o:":"},u=0,l=0,c=r;u<a;){var h=e.charAt(u);switch(l){case 0:d(h);break;case 1:p(e.charAt(u-1),h);break;case 2:f(h);break;case 3:m(h);break;case 4:g(h);break;case 5:v(h);break;case 6:b(h);break;case 7:y(h);break;default:O.throwUnhandledCaseError(l)}u++}return x(),s;function d(e){"m"===e?A(1):n.test(e)&&A()}function p(e,t){":"===e?n.test(t)?(l=2,c=new pe(z.__assign({},c,{hasMailtoPrefix:!0}))):C():o[e]===t||(n.test(t)?l=2:"."===t?l=3:"@"===t?l=4:C())}function f(e){"."===e?l=3:"@"===e?l=4:n.test(e)||C()}function m(e){"."===e?C():"@"===e?C():n.test(e)?l=2:C()}function g(e){se.domainNameCharRegex.test(e)?l=5:C()}function v(e){"."===e?l=7:"-"===e?l=6:se.domainNameCharRegex.test(e)||x()}function b(e){"-"===e||"."===e?x():se.domainNameCharRegex.test(e)?l=5:x()}function y(e){"."===e||"-"===e?x():se.domainNameCharRegex.test(e)?(l=5,c=new pe(z.__assign({},c,{hasDomainDot:!0}))):x()}function A(e){void 0===e&&(e=2),l=e,c=new pe({idx:u})}function C(){l=0,c=r}function x(){if(c.hasDomainDot){var n=e.slice(c.idx,u);/[-.]$/.test(n)&&(n=n.slice(0,-1));var a=c.hasMailtoPrefix?n.slice("mailto:".length):n;(function(e){var t=(e.split(".").pop()||"").toLowerCase();return i.test(t)})(a)&&s.push(new $.EmailMatch({tagBuilder:t,matchedText:n,offset:c.idx,email:a}))}C()}},t}(ne.Matcher);le.EmailMatcher=de;var pe=function(e){void 0===e&&(e={}),this.idx=void 0!==e.idx?e.idx:-1,this.hasMailtoPrefix=!!e.hasMailtoPrefix,this.hasDomainDot=!!e.hasDomainDot},fe={};Object.defineProperty(fe,"__esModule",{value:!0});var me=function(){function e(){}return e.isValid=function(e,t){return!(t&&!this.isValidUriScheme(t)||this.urlMatchDoesNotHaveProtocolOrDot(e,t)||this.urlMatchDoesNotHaveAtLeastOneWordChar(e,t)&&!this.isValidIpAddress(e)||this.containsMultipleDots(e))},e.isValidIpAddress=function(e){var t=new RegExp(this.hasFullProtocolRegex.source+this.ipRegex.source);return null!==e.match(t)},e.containsMultipleDots=function(e){var t=e;return this.hasFullProtocolRegex.test(e)&&(t=e.split("://")[1]),t.split("/")[0].indexOf("..")>-1},e.isValidUriScheme=function(e){var t=e.match(this.uriSchemeRegex),n=t&&t[0].toLowerCase();return"javascript:"!==n&&"vbscript:"!==n},e.urlMatchDoesNotHaveProtocolOrDot=function(e,t){return!(!e||t&&this.hasFullProtocolRegex.test(t)||-1!==e.indexOf("."))},e.urlMatchDoesNotHaveAtLeastOneWordChar=function(e,t){return!(!e||!t||this.hasFullProtocolRegex.test(t)||this.hasWordCharAfterProtocolRegex.test(e))},e.hasFullProtocolRegex=/^[A-Za-z][-.+A-Za-z0-9]*:\/\//,e.uriSchemeRegex=/^[A-Za-z][-.+A-Za-z0-9]*:/,e.hasWordCharAfterProtocolRegex=new RegExp(":[^\\s]*?["+se.alphaCharsStr+"]"),e.ipRegex=/[0-9][0-9]?[0-9]?\.[0-9][0-9]?[0-9]?\.[0-9][0-9]?[0-9]?\.[0-9][0-9]?[0-9]?(:[0-9]*)?\/?$/,e}();fe.UrlMatchValidator=me;var ge={};Object.defineProperty(ge,"__esModule",{value:!0});var ve,be=(ve=new RegExp("[/?#](?:["+se.alphaNumericAndMarksCharsStr+"\\-+&@#/%=~_()|'$*\\[\\]{}?!:,.;^\u2713]*["+se.alphaNumericAndMarksCharsStr+"\\-+&@#/%=~_()|'$*\\[\\]{}\u2713])?"),new RegExp(["(?:","(",/(?:[A-Za-z][-.+A-Za-z0-9]{0,63}:(?![A-Za-z][-.+A-Za-z0-9]{0,63}:\/\/)(?!\d+\/?)(?:\/\/)?)/.source,se.getDomainNameStr(2),")","|","(","(//)?",/(?:www\.)/.source,se.getDomainNameStr(6),")","|","(","(//)?",se.getDomainNameStr(10)+"\\.",ue.tldRegex.source,"(?![-"+se.alphaNumericCharsStr+"])",")",")","(?::[0-9]+)?","(?:"+ve.source+")?"].join(""),"gi")),ye=new RegExp("["+se.alphaNumericAndMarksCharsStr+"]"),Ae=function(e){function t(t){var n=e.call(this,t)||this;return n.stripPrefix={scheme:!0,www:!0},n.stripTrailingSlash=!0,n.decodePercentEncoding=!0,n.matcherRegex=be,n.wordCharRegExp=ye,n.stripPrefix=t.stripPrefix,n.stripTrailingSlash=t.stripTrailingSlash,n.decodePercentEncoding=t.decodePercentEncoding,n}return z.__extends(t,e),t.prototype.parseMatches=function(e){for(var t,n=this.matcherRegex,i=this.stripPrefix,s=this.stripTrailingSlash,a=this.decodePercentEncoding,r=this.tagBuilder,o=[],u=function(){var n=t[0],u=t[1],c=t[4],h=t[5],d=t[9],p=t.index,f=h||d,m=e.charAt(p-1);if(!fe.UrlMatchValidator.isValid(n,u))return"continue";if(p>0&&"@"===m)return"continue";if(p>0&&f&&l.wordCharRegExp.test(m))return"continue";if(/\?$/.test(n)&&(n=n.substr(0,n.length-1)),l.matchHasUnbalancedClosingParen(n))n=n.substr(0,n.length-1);else{var g=l.matchHasInvalidCharAfterTld(n,u);g>-1&&(n=n.substr(0,g))}var v=["http://","https://"].find(function(e){return!!u&&-1!==u.indexOf(e)});if(v){var b=n.indexOf(v);n=n.substr(b),u=u.substr(b),p+=b}var y=u?"scheme":c?"www":"tld",A=!!u;o.push(new ee.UrlMatch({tagBuilder:r,matchedText:n,offset:p,urlMatchType:y,url:n,protocolUrlMatch:A,protocolRelativeMatch:!!f,stripPrefix:i,stripTrailingSlash:s,decodePercentEncoding:a}))},l=this;null!==(t=n.exec(e));)u();return o},t.prototype.matchHasUnbalancedClosingParen=function(e){var t,n=e.charAt(e.length-1);if(")"===n)t="(";else if("]"===n)t="[";else{if("}"!==n)return!1;t="{"}for(var i=0,s=0,a=e.length-1;s<a;s++){var r=e.charAt(s);r===t?i++:r===n&&(i=Math.max(i-1,0))}return 0===i},t.prototype.matchHasInvalidCharAfterTld=function(e,t){if(!e)return-1;var n=0;t&&(n=e.indexOf(":"),e=e.slice(n));var i=new RegExp("^((.?//)?[-."+se.alphaNumericAndMarksCharsStr+"]*[-"+se.alphaNumericAndMarksCharsStr+"]\\.[-"+se.alphaNumericAndMarksCharsStr+"]+)").exec(e);return null===i?-1:(n+=i[1].length,e=e.slice(i[1].length),/^[^-.A-Za-z0-9:\/?#]/.test(e)?n:-1)},t}(ne.Matcher);ge.UrlMatcher=Ae;var Ce={};Object.defineProperty(Ce,"__esModule",{value:!0});var xe=new RegExp("#[_"+se.alphaNumericAndMarksCharsStr+"]{1,139}(?![_"+se.alphaNumericAndMarksCharsStr+"])","g"),ke=new RegExp("[^"+se.alphaNumericAndMarksCharsStr+"]"),we=function(e){function t(t){var n=e.call(this,t)||this;return n.serviceName="twitter",n.matcherRegex=xe,n.nonWordCharRegex=ke,n.serviceName=t.serviceName,n}return z.__extends(t,e),t.prototype.parseMatches=function(e){for(var t,n=this.matcherRegex,i=this.nonWordCharRegex,s=this.serviceName,a=this.tagBuilder,r=[];null!==(t=n.exec(e));){var o=t.index,u=e.charAt(o-1);if(0===o||i.test(u)){var l=t[0],c=t[0].slice(1);r.push(new Y.HashtagMatch({tagBuilder:a,matchedText:l,offset:o,serviceName:s,hashtag:c}))}}return r},t}(ne.Matcher);Ce.HashtagMatcher=we;var Ee={};Object.defineProperty(Ee,"__esModule",{value:!0});var _e=new RegExp(/(?:(?:(?:(\+)?\d{1,3}[-\040.]?)?\(?\d{3}\)?[-\040.]?\d{3}[-\040.]?\d{4})|(?:(\+)(?:9[976]\d|8[987530]\d|6[987]\d|5[90]\d|42\d|3[875]\d|2[98654321]\d|9[8543210]|8[6421]|6[6543210]|5[87654321]|4[987654310]|3[9643210]|2[70]|7|1)[-\040.]?(?:\d[-\040.]?){6,12}\d+))([,;]+[0-9]+#?)*/.source+"|"+/(0([1-9]{1}-?[1-9]\d{3}|[1-9]{2}-?\d{3}|[1-9]{2}\d{1}-?\d{2}|[1-9]{2}\d{2}-?\d{1})-?\d{4}|0[789]0-?\d{4}-?\d{4}|050-?\d{4}-?\d{4})/.source,"g"),Fe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.matcherRegex=_e,t}return z.__extends(t,e),t.prototype.parseMatches=function(e){for(var t,n=this.matcherRegex,i=this.tagBuilder,s=[];null!==(t=n.exec(e));){var a=t[0],r=a.replace(/[^0-9,;#]/g,""),o=!(!t[1]&&!t[2]),u=0==t.index?"":e.substr(t.index-1,1),l=e.substr(t.index+a.length,1),c=!u.match(/\d/)&&!l.match(/\d/);this.testMatch(t[3])&&this.testMatch(a)&&c&&s.push(new Z.PhoneMatch({tagBuilder:i,matchedText:a,offset:t.index,number:r,plusSign:o}))}return s},t.prototype.testMatch=function(e){return se.nonDigitRe.test(e)},t}(ne.Matcher);Ee.PhoneMatcher=Fe;var Se={};Object.defineProperty(Se,"__esModule",{value:!0});var De=new RegExp("@[_"+se.alphaNumericAndMarksCharsStr+"]{1,50}(?![_"+se.alphaNumericAndMarksCharsStr+"])","g"),Be=new RegExp("@[_."+se.alphaNumericAndMarksCharsStr+"]{1,30}(?![_"+se.alphaNumericAndMarksCharsStr+"])","g"),Te=new RegExp("@[-_."+se.alphaNumericAndMarksCharsStr+"]{1,50}(?![-_"+se.alphaNumericAndMarksCharsStr+"])","g"),Me=new RegExp("[^"+se.alphaNumericAndMarksCharsStr+"]"),Le=function(e){function t(t){var n=e.call(this,t)||this;return n.serviceName="twitter",n.matcherRegexes={twitter:De,instagram:Be,soundcloud:Te},n.nonWordCharRegex=Me,n.serviceName=t.serviceName,n}return z.__extends(t,e),t.prototype.parseMatches=function(e){var t,n=this.serviceName,i=this.matcherRegexes[this.serviceName],s=this.nonWordCharRegex,a=this.tagBuilder,r=[];if(!i)return r;for(;null!==(t=i.exec(e));){var o=t.index,u=e.charAt(o-1);if(0===o||s.test(u)){var l=t[0].replace(/\.+$/g,""),c=l.slice(1);r.push(new X.MentionMatch({tagBuilder:a,matchedText:l,offset:o,serviceName:n,mention:c}))}}return r},t}(ne.Matcher);Se.MentionMatcher=Le;var Ne={};Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.parseHtml=function(e,t){for(var n,i=t.onOpenTag,s=t.onCloseTag,a=t.onText,r=t.onComment,o=t.onDoctype,u=new ze,l=0,c=e.length,h=0,d=0,p=u;l<c;){var f=e.charAt(l);switch(h){case 0:m(f);break;case 1:g(f);break;case 2:b(f);break;case 3:v(f);break;case 4:y(f);break;case 5:A(f);break;case 6:C(f);break;case 7:x(f);break;case 8:k(f);break;case 9:w(f);break;case 10:E(f);break;case 11:_(f);break;case 12:F(f);break;case 13:"--"===e.substr(l,2)?(l+=2,p=new ze(z.__assign({},p,{type:"comment"})),h=14):"DOCTYPE"===e.substr(l,7).toUpperCase()?(l+=7,p=new ze(z.__assign({},p,{type:"doctype"})),h=20):P();break;case 14:S(f);break;case 15:D(f);break;case 16:B(f);break;case 17:T(f);break;case 18:M(f);break;case 19:L(f);break;case 20:N(f);break;default:O.throwUnhandledCaseError(h)}l++}function m(e){"<"===e&&R()}function g(e){"!"===e?h=13:"/"===e?(h=2,p=new ze(z.__assign({},p,{isClosing:!0}))):"<"===e?R():se.letterRe.test(e)?(h=3,p=new ze(z.__assign({},p,{isOpening:!0}))):(h=0,p=u)}function v(e){se.whitespaceRe.test(e)?(p=new ze(z.__assign({},p,{name:j()})),h=4):"<"===e?R():"/"===e?(p=new ze(z.__assign({},p,{name:j()})),h=12):">"===e?(p=new ze(z.__assign({},p,{name:j()})),U()):se.letterRe.test(e)||se.digitRe.test(e)||":"===e||P()}function b(e){">"===e?P():se.letterRe.test(e)?h=3:P()}function y(e){se.whitespaceRe.test(e)||("/"===e?h=12:">"===e?U():"<"===e?R():"="===e||se.quoteRe.test(e)||se.controlCharsRe.test(e)?P():h=5)}function A(e){se.whitespaceRe.test(e)?h=6:"/"===e?h=12:"="===e?h=7:">"===e?U():"<"===e?R():se.quoteRe.test(e)&&P()}function C(e){se.whitespaceRe.test(e)||("/"===e?h=12:"="===e?h=7:">"===e?U():"<"===e?R():se.quoteRe.test(e)?P():h=5)}function x(e){se.whitespaceRe.test(e)||('"'===e?h=8:"'"===e?h=9:/[>=`]/.test(e)?P():"<"===e?R():h=10)}function k(e){'"'===e&&(h=11)}function w(e){"'"===e&&(h=11)}function E(e){se.whitespaceRe.test(e)?h=4:">"===e?U():"<"===e&&R()}function _(e){se.whitespaceRe.test(e)?h=4:"/"===e?h=12:">"===e?U():"<"===e?R():(h=4,l--)}function F(e){">"===e?(p=new ze(z.__assign({},p,{isClosing:!0})),U()):h=4}function S(e){"-"===e?h=15:">"===e?P():h=16}function D(e){"-"===e?h=18:">"===e?P():h=16}function B(e){"-"===e&&(h=17)}function T(e){h="-"===e?18:16}function M(e){">"===e?U():"!"===e?h=19:"-"===e||(h=16)}function L(e){"-"===e?h=17:">"===e?U():h=16}function N(e){">"===e?U():"<"===e&&R()}function P(){h=0,p=u}function R(){h=1,p=new ze({idx:l})}function U(){var t=e.slice(d,p.idx);t&&a(t,d),"comment"===p.type?r(p.idx):"doctype"===p.type?o(p.idx):(p.isOpening&&i(p.name,p.idx),p.isClosing&&s(p.name,p.idx)),P(),d=l+1}function j(){var t=p.idx+(p.isClosing?2:1);return e.slice(t,l).toLowerCase()}d<l&&(n=e.slice(d,l),a(n,d),d=l+1)};var ze=function(e){void 0===e&&(e={}),this.idx=void 0!==e.idx?e.idx:-1,this.type=e.type||"tag",this.name=e.name||"",this.isOpening=!!e.isOpening,this.isClosing=!!e.isClosing},Oe={};Object.defineProperty(Oe,"__esModule",{value:!0});var Pe=function(){function e(t){void 0===t&&(t={}),this.version=e.version,this.urls={},this.email=!0,this.phone=!0,this.hashtag=!1,this.mention=!1,this.newWindow=!0,this.stripPrefix={scheme:!0,www:!0},this.stripTrailingSlash=!0,this.decodePercentEncoding=!0,this.truncate={length:0,location:"end"},this.className="",this.replaceFn=null,this.context=void 0,this.sanitizeHtml=!1,this.matchers=null,this.tagBuilder=null,this.urls=this.normalizeUrlsCfg(t.urls),this.email="boolean"==typeof t.email?t.email:this.email,this.phone="boolean"==typeof t.phone?t.phone:this.phone,this.hashtag=t.hashtag||this.hashtag,this.mention=t.mention||this.mention,this.newWindow="boolean"==typeof t.newWindow?t.newWindow:this.newWindow,this.stripPrefix=this.normalizeStripPrefixCfg(t.stripPrefix),this.stripTrailingSlash="boolean"==typeof t.stripTrailingSlash?t.stripTrailingSlash:this.stripTrailingSlash,this.decodePercentEncoding="boolean"==typeof t.decodePercentEncoding?t.decodePercentEncoding:this.decodePercentEncoding,this.sanitizeHtml=t.sanitizeHtml||!1;var n=this.mention;if(!1!==n&&"twitter"!==n&&"instagram"!==n&&"soundcloud"!==n)throw new Error("invalid `mention` cfg - see docs");var i=this.hashtag;if(!1!==i&&"twitter"!==i&&"facebook"!==i&&"instagram"!==i)throw new Error("invalid `hashtag` cfg - see docs");this.truncate=this.normalizeTruncateCfg(t.truncate),this.className=t.className||this.className,this.replaceFn=t.replaceFn||this.replaceFn,this.context=t.context||this}return e.link=function(t,n){return new e(n).link(t)},e.parse=function(t,n){return new e(n).parse(t)},e.prototype.normalizeUrlsCfg=function(e){return null==e&&(e=!0),"boolean"==typeof e?{schemeMatches:e,wwwMatches:e,tldMatches:e}:{schemeMatches:"boolean"!=typeof e.schemeMatches||e.schemeMatches,wwwMatches:"boolean"!=typeof e.wwwMatches||e.wwwMatches,tldMatches:"boolean"!=typeof e.tldMatches||e.tldMatches}},e.prototype.normalizeStripPrefixCfg=function(e){return null==e&&(e=!0),"boolean"==typeof e?{scheme:e,www:e}:{scheme:"boolean"!=typeof e.scheme||e.scheme,www:"boolean"!=typeof e.www||e.www}},e.prototype.normalizeTruncateCfg=function(e){return"number"==typeof e?{length:e,location:"end"}:O.defaults(e||{},{length:Number.POSITIVE_INFINITY,location:"end"})},e.prototype.parse=function(e){var t=this,n=["a","style","script"],i=0,s=[];return Ne.parseHtml(e,{onOpenTag:function(e){n.indexOf(e)>=0&&i++},onText:function(e,n){if(0===i){var a=O.splitAndCapture(e,/(&nbsp;|&#160;|&lt;|&#60;|&gt;|&#62;|&quot;|&#34;|&#39;)/gi),r=n;a.forEach(function(e,n){if(n%2==0){var i=t.parseText(e,r);s.push.apply(s,i)}r+=e.length})}},onCloseTag:function(e){n.indexOf(e)>=0&&(i=Math.max(i-1,0))},onComment:function(e){},onDoctype:function(e){}}),s=this.compactMatches(s),s=this.removeUnwantedMatches(s)},e.prototype.compactMatches=function(e){e.sort(function(e,t){return e.getOffset()-t.getOffset()});for(var t=0;t<e.length-1;t++){var n=e[t],i=n.getOffset(),s=n.getMatchedText().length,a=i+s;if(t+1<e.length){if(e[t+1].getOffset()===i){var r=e[t+1].getMatchedText().length>s?t:t+1;e.splice(r,1);continue}e[t+1].getOffset()<a&&e.splice(t+1,1)}}return e},e.prototype.removeUnwantedMatches=function(e){return this.hashtag||O.remove(e,function(e){return"hashtag"===e.getType()}),this.email||O.remove(e,function(e){return"email"===e.getType()}),this.phone||O.remove(e,function(e){return"phone"===e.getType()}),this.mention||O.remove(e,function(e){return"mention"===e.getType()}),this.urls.schemeMatches||O.remove(e,function(e){return"url"===e.getType()&&"scheme"===e.getUrlMatchType()}),this.urls.wwwMatches||O.remove(e,function(e){return"url"===e.getType()&&"www"===e.getUrlMatchType()}),this.urls.tldMatches||O.remove(e,function(e){return"url"===e.getType()&&"tld"===e.getUrlMatchType()}),e},e.prototype.parseText=function(e,t){void 0===t&&(t=0),t=t||0;for(var n=this.getMatchers(),i=[],s=0,a=n.length;s<a;s++){for(var r=n[s].parseMatches(e),o=0,u=r.length;o<u;o++)r[o].setOffset(t+r[o].getOffset());i.push.apply(i,r)}return i},e.prototype.link=function(e){if(!e)return"";this.sanitizeHtml&&(e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"));for(var t=this.parse(e),n=[],i=0,s=0,a=t.length;s<a;s++){var r=t[s];n.push(e.substring(i,r.getOffset())),n.push(this.createMatchReturnVal(r)),i=r.getOffset()+r.getMatchedText().length}return n.push(e.substring(i)),n.join("")},e.prototype.createMatchReturnVal=function(e){var t;return this.replaceFn&&(t=this.replaceFn.call(this.context,e)),"string"==typeof t?t:!1===t?e.getMatchedText():t instanceof P.HtmlTag?t.toAnchorString():e.buildTag().toAnchorString()},e.prototype.getMatchers=function(){if(this.matchers)return this.matchers;var e=this.getTagBuilder(),t=[new Ce.HashtagMatcher({tagBuilder:e,serviceName:this.hashtag}),new le.EmailMatcher({tagBuilder:e}),new Ee.PhoneMatcher({tagBuilder:e}),new Se.MentionMatcher({tagBuilder:e,serviceName:this.mention}),new ge.UrlMatcher({tagBuilder:e,stripPrefix:this.stripPrefix,stripTrailingSlash:this.stripTrailingSlash,decodePercentEncoding:this.decodePercentEncoding})];return this.matchers=t},e.prototype.getTagBuilder=function(){var e=this.tagBuilder;return e||(e=this.tagBuilder=new q.AnchorTagBuilder({newWindow:this.newWindow,truncate:this.truncate,className:this.className})),e},e.version="3.14.2",e.AnchorTagBuilder=q.AnchorTagBuilder,e.HtmlTag=P.HtmlTag,e.matcher={Email:le.EmailMatcher,Hashtag:Ce.HashtagMatcher,Matcher:ne.Matcher,Mention:Se.MentionMatcher,Phone:Ee.PhoneMatcher,Url:ge.UrlMatcher},e.match={Email:$.EmailMatch,Hashtag:Y.HashtagMatch,Match:W.Match,Mention:X.MentionMatch,Phone:Z.PhoneMatch,Url:ee.UrlMatch},e}();Oe.default=Pe;var Re={};Object.defineProperty(Re,"__esModule",{value:!0}),z.__exportStar($,Re),z.__exportStar(Y,Re),z.__exportStar(W,Re),z.__exportStar(X,Re),z.__exportStar(Z,Re),z.__exportStar(ee,Re);var Ue={};Object.defineProperty(Ue,"__esModule",{value:!0}),z.__exportStar(le,Ue),z.__exportStar(Ce,Ue),z.__exportStar(ne,Ue),z.__exportStar(Se,Ue),z.__exportStar(Ee,Ue),z.__exportStar(ge,Ue);var je={};Object.defineProperty(je,"__esModule",{value:!0}),je=je=Oe.default,Object.defineProperty(je,"__esModule",{value:!0}),je.default=Oe.default,je.Autolinker=Oe.default,z.__exportStar(Oe,je),z.__exportStar(q,je),z.__exportStar(P,je),z.__exportStar(Re,je),z.__exportStar(Ue,je);const Ie=t.assets.BLANK_PIXEL,qe=t.assets.SVG.CHANNEL;var He=class extends a{constructor(e,t){super(e),this.content=t,this.customListeners=[]}setup(){super.setup(),this.modalAlertEl=this.el.querySelector(".modal__alert"),this.formel.addEventListener("submit",e=>{e.preventDefault();let t=new CustomEvent("reply",{detail:this.createReply()});this.el.dispatchEvent(t)})}createReply(){let e=new FormData(this.formel),t={};for(let[n,i]of e)t[n]=i;return t}setContent(e){this.content=e,Object.keys(this.content).forEach(e=>{let t=this.content[e],n=this.el.querySelector(`.modal__${e}`);if(Array.isArray(t)&&(1===t.length&&(t=t[0]),"input-group"===e)){let e=n.querySelector("input");e.setAttribute("name",t.name),e.setAttribute("type",t.type||"text");let i=document.createTextNode(t.label);n.querySelector("label").prepend(i)}("string"==typeof t||t instanceof String)&&(n.textContent=t)})}clearContent(){Object.keys(this.content).forEach(e=>{let t=this.el.querySelector(`.modal__${e}`);if("input-group"===e){let e=t.querySelector("input");e.setAttribute("name",""),e.setAttribute("type","text"),e.value="",n.removeTextChildren(t.querySelector("label"))}else("string"==typeof e||e instanceof String)&&(t.textContent="")}),this.clearError()}close(){super.close(),this.clearContent(),this.removeAllCustomListeners(this.customListeners)}prompt(e){return e&&this.setContent(e),this.open(),this.el.querySelector("input").focus(),new Promise((e,t)=>{this.attachListener(this.el,t=>e(t.detail),"reply"),this.attachListener(this.el,()=>t("Modal closed"),"close")})}attachListener(e,t,n){e.addEventListener(n,t),this.customListeners.push({el:e,cb:t,event:n})}removeListener(e,t,n){e.removeEventListener(n,t,{once:!0})}removeAllCustomListeners(){for(let e of this.customListeners)this.removeListener(e.el,e.cb,e.event);this.customListeners=[]}displayError(e){this.modalAlertEl.textContent=e}clearError(){this.modalAlertEl.textContent=""}},We={chat:()=>new class{constructor(e){this.el=e}setup(){this.chatName=this.el.querySelector(".chat__name"),this.chatMessages=this.el.querySelectorAll("ul.chat__messages"),this.chatBody=this.el.querySelector(".chat__content"),this.userAvatar=this.el.querySelector(".inputarea__avatar--self"),this.chatAvatar=this.el.querySelector(".inputarea__avatar--chat"),this.btnSend=this.el.querySelector(".inputarea__submit"),this.messageInput=this.el.querySelector(".inputarea__input"),this.messageTemplate=document.getElementById("template__message"),this.activeChat=this.el.querySelector(".chat__messages--active"),this.profileLinks=this.el.querySelectorAll(".link--profile"),this.loaded=new Set([...this.chatMessages].map(e=>e.dataset.chat)),this.scrolled=!1,this.btnSend&&this.btnSend.addEventListener("click",e=>{e.preventDefault(),this.sendMessage()}),[...this.profileLinks].forEach(e=>e.addEventListener("click",e=>{this.controller.viewProfile(this.getChatName(),e.target.classList.contains("link__profile--self"))})),this.chatBody.addEventListener("scroll",()=>this.scrolled=!0),this.updateScroll(),twemoji.parse(this.el),this.activeChat.innerHTML=je.link(this.activeChat.innerHTML)}updateScroll(){this.scrolled||(this.chatBody.scrollTop=this.chatBody.scrollHeight)}loadChat(e,t){this.chatBody.insertAdjacentHTML("afterbegin",je.link(t)),this.loaded.add(e)}setChatName(e){e.startsWith("user:")&&(e=e.substring(5)),this.chatName.textContent=e}setChatStatus(e){this.chatName.dataset.status=e}getChatName(){if(this.activeChat)return this.activeChat.dataset.chat}setUserAvatar(){let e=this.controller.getUserData();this.userAvatar.dataset.letter=e.username.substring(0,1).toUpperCase(),this.userAvatar.getElementsByTagName("img")[0].src=e.user_avatar}setChatAvatar(){const e=this.getChatName();let t;if(e.startsWith("user:")){const n=e.substring(5);if((t=this.controller.avatars[n])==Ie){let e=n.substring(0,1).toUpperCase();this.chatAvatar.dataset.letter=e}}else t=qe,this.chatAvatar.dataset.letter="";this.chatAvatar.getElementsByTagName("img")[0].src=t}viewChat(e){this.setChatName(e),this.viewMessages(e),this.setUserAvatar(),this.setChatAvatar(),this.scrolled=!1,this.updateScroll(),this.messageInput.innerText=""}viewMessages(e){this.activeChat&&(console.log(this.activeChat),console.log(this.activeChat.classList),console.log(this.activeChat.classList.contains("chat__messages--active")),this.activeChat.dataset.test="test",this.activeChat.classList.remove("chat__messages--active"),this.activeChat.classList="chat__messages");let t=this.chatBody.querySelector(`[data-chat="${e}"]`);t.classList.add("chat__messages--active"),this.activeChat=t}sendMessage(){if(this.controller.connected){let e=this.messageInput.innerText;this.messageInput.innerText.length>0&&this.controller.sendMessage(this.getChatName(),e),this.messageInput.innerText="",this.scrolled=!1}}addMessage(e,t,n,i){if(this.loaded.has(e)){let s=this.messageTemplate.cloneNode(!0).content;const a=s.querySelector(".contact__message"),r=s.querySelector(".contact__date"),o=s.querySelector(".contact__name"),u=s.querySelector(".contact__avatar"),l=s.querySelector(".contact__avatar img");if(a.innerHTML=je.link(t),r.textContent=n,i)o.textContent=i,u.dataset.letter=i.substring(0,1),l.src=this.controller.avatars[i];else{let e=this.controller.getUserData();o.textContent=e.username,u.dataset.letter=e.username.substring(0,1),l.src=e.user_avatar,s.querySelector(".message").classList.add("message--self")}let c=this.chatBody.querySelector(`[data-chat="${e}"]`);twemoji.parse(s),c.appendChild(s),this.updateScroll()}}}(document.querySelector(".chat")),emojiPicker:()=>new class{constructor(e,t){this.el=e,this.input=t}setup(){this.btn=this.el.querySelector(".emoji-picker__btn"),this.popover=this.el.querySelector(".emoji-picker__popover"),this.tabs=this.el.querySelectorAll(".emoji-picker__navitem"),this.emojiGroups=this.el.querySelectorAll(".emoji-picker__group"),this.activeTab=this.el.querySelector(".emoji-picker__navitem"),this.activeGroup=this.el.querySelector(".emoji-picker__group"),this.btn.addEventListener("click",()=>this.togglePicker()),this.popover.addEventListener("click",e=>{if("IMG"===e.target.nodeName){const t=e.target.parentElement.dataset.unicode;this.write(t)}else"A"===e.target.nodeName&&this.toggleTabs(e.target)}),this.popover.addEventListener("blur",e=>{e.relatedTarget!==this.btn&&this.hidePicker()}),this.popover.addEventListener("keydown",e=>{"Escape"===e.key&&this.hidePicker()})}togglePicker(){this.popover.classList.toggle("emoji-picker__popover--open"),this.popover.focus()}hidePicker(){this.popover.classList.remove("emoji-picker__popover--open")}write(e){if(this.input.focus(),!this.input)return;let t,i;if("INPUT"===this.input.nodeName||"TEXTAREA"===this.input.nodeName){t=this.input.value,i=this.input.selectionStart;let s=t.substring(0,i)+e+t.substring(i);this.input.value=s,n.setSelectionRange(i+e.length,i+e.length)}else{t=this.input.textContent,i=n.getCaretCharacterOffsetWithin(this.input);let s=t.substring(0,i)+e+t.substring(i);this.input.textContent=s,n.setSelectionRange(this.input,i+e.length,i+e.length)}}toggleTabs(e){if(e!==this.activeTab){let t=e.dataset.targetgroup;this.activeTab.classList.remove("emoji-picker__navitem--active"),e.classList.add("emoji-picker__navitem--active"),this.activeTab=e;let n=Array.from(this.emojiGroups).find(e=>e.dataset.group===t);this.activeGroup.classList.remove("emoji-picker__group--active"),n.classList.add("emoji-picker__group--active"),this.activeGroup=n}}}(document.querySelector(".emoji-picker"),document.querySelector("#chatInput")),promptModal:()=>new He(document.querySelector(".modal__prompt")),loader:()=>new class{constructor(e){this.el=e}setup(){}open(){document.body.classList.contains("is-blurred")||document.body.classList.add("is-blurred"),this.el.classList.contains("loader--open")||this.el.classList.add("loader--open")}close(){document.body.classList.contains("is-blurred")&&document.body.classList.remove("is-blurred"),this.el.classList.contains("loader--open")&&(this.el.classList.add("fade-out"),this.el.addEventListener("transitionend",()=>this.el.classList.remove("fade-out","loader--open"),{once:!0}))}}(document.querySelector(".loader")),search:()=>new class{constructor(e,t){this.el=e,this.items=t}setup(){this.el.addEventListener("keyup",()=>this.filterItems(this.el.value))}filterItems(e){this.resetFilter(),this.items.forEach(t=>{t.querySelector(".list__link").dataset.chat.toLowerCase().includes(e.toLowerCase())||t.classList.add("list__item--hidden")})}resetFilter(){this.items.forEach(e=>e.classList.remove("list__item--hidden"))}}(document.querySelector(".search__input"),[...document.querySelectorAll(".channel__list .list__item"),...document.querySelectorAll(".users__list .list__item")]),channelList:()=>new N(document.querySelector(".channel__list"),"channel"),usersList:()=>new N(document.querySelector(".users__list"),"user"),profileSidebar:()=>new L(document.querySelector(".profile"),{btnOpen:document.querySelector(".link__profile--self")}),listsSidebar:()=>new D(document.querySelector(".sidebar"),{btnToggle:document.querySelector(".navbar__burger")}),loginModal:()=>new _(document.querySelector(".modal__login")),statusSelect:()=>new T("#user_status"),navbar:()=>new class{constructor(e){this.el=e}setup(){this.user=this.el.querySelector(".navbar__user"),this.alert=this.el.querySelector(".navbar__alert")}setUserAvatar(){let e=this.controller.getUserData();this.user.querySelector(".avatar img").letter=e.username.substring(0,1).toUpperCase(),this.user.querySelector(".avatar img").src=e.user_avatar}showAlert(){this.alert.classList.add("navbar__alert--open")}hideAlert(){this.alert.classList.remove("navbar__alert--open")}}(document.querySelector(".navbar")),alert:()=>new class{constructor(e,t){this.el=e,this.controller=t}setup(){}showAlert(){this.el.classList.add("alert--open")}hideAlert(){this.el.classList.remove("alert--open")}}(document.querySelector(".alert"))};const Qe=t.variables.socketio;var $e=class{constructor(e,t){this.socket=e,this.controller=t,this.init()}init(){this.socket.on("connect",()=>this.controller.onConnected()),this.socket.on("disconnect",()=>this.controller.onDisconnected()),this.socket.on(Qe.APP.LOADED,()=>this.controller.onAppLoaded()),this.socket.on(Qe.CHANNELS.UPDATE.ANNOUNCE,()=>this.socket.emit(Qe.CHANNELS.UPDATE.REQUEST)),this.socket.on(Qe.CHANNELS.UPDATE.HTML,e=>this.controller.onChannelsUpdated(e)),this.socket.on(Qe.USERS.UPDATE.ANNOUNCE,()=>this.socket.emit(Qe.USERS.UPDATE.REQUEST)),this.socket.on(Qe.USERS.UPDATE.HTML,e=>this.controller.onUsersUpdated(e)),this.socket.on(Qe.CHAT.HTML,e=>this.controller.onChatLoaded(e.chat,e.html)),this.socket.on(Qe.PROFILE.HTML,e=>this.controller.onProfileLoaded(e)),this.socket.on(Qe.MESSAGE.RECEIVED,e=>this.controller.onMessageReceived(e.chat,e.message)),this.socket.on(Qe.USERDATA.STATUS.UPDATED,e=>this.controller.onStatusChange(e.username,e.status))}createChannel(e){return new Promise(t=>{this.socket.once(Qe.CHANNELS.CREATE.ERROR,e=>(this.socket.off(Qe.CHANNELS.CREATE.SUCCESS),t({success:!1,errorMessage:e}))),this.socket.once(Qe.CHANNELS.CREATE.SUCCESS,e=>(this.socket.off(Qe.CHANNELS.CREATE.ERROR),t({success:!0,channel:e}))),this.socket.emit(Qe.CHANNELS.CREATE.NEW,e)})}updateCurrentChat(e){this.socket.emit(Qe.CURRENT_CHAT.UPDATED,e)}joinChannel(e){this.socket.emit(Qe.CHANNELS.JOIN,e)}loadChat(e){this.socket.emit(Qe.CHAT.LOAD,e)}getProfile(e,t){this.socket.emit(Qe.PROFILE.LOAD,e,t)}updateUserData(e,t){this.socket.emit(Qe.USERDATA.UPDATE,e,t)}sendMessage(e,t,n){this.socket.emit(Qe.MESSAGE.SEND,e,t,n)}};document.addEventListener("DOMContentLoaded",function(){new(e({}))})}();